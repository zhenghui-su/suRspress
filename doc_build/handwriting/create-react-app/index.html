<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="Rspress v1.18.1"><title data-rh="true">漫漫前端</title><meta data-rh="true" name="description" content="晨晨的前端之路"/><script>{const e=localStorage.getItem("rspress-theme-appearance"),t=window.matchMedia("(prefers-color-scheme: dark)").matches,a=e&&"auto"!==e?"dark"===e:t;document.documentElement.classList.toggle("dark",a),document.documentElement.style.colorScheme=a?"dark":"light"}</script><title>漫漫前端</title><link rel="icon" href="/rspress-icon.png"><script defer="defer" src="/static/js/styles.1fbda5ae.js"></script><script defer="defer" src="/static/js/lib-lodash.2cf53891.js"></script><script defer="defer" src="/static/js/lib-polyfill.21da23ae.js"></script><script defer="defer" src="/static/js/lib-react.fa7a284a.js"></script><script defer="defer" src="/static/js/lib-router.552db59c.js"></script><script defer="defer" src="/static/js/index.b31504e7.js"></script><link href="/static/css/styles.68867452.css" rel="stylesheet"></head><body ><div id="root"><div><div class="navContainer_f6cde rspress-nav px-6 " style="position:sticky"><div class="container_f6cde flex justify-between items-center h-full"><div class="navBarTitle_f6cde"><a href="/" class="flex items-center w-full h-full text-base font-semibold transition-opacity duration-300 hover:opacity-60"><img src="/rspress-light-logo.png" alt="logo" id="logo" class="mr-4 rspress-logo dark:hidden"/><img src="/rspress-dark-logo.png" alt="logo" id="logo" class="mr-4 rspress-logo hidden dark:block"/></a></div><div class="undefined flex flex-1 justify-end items-center"><div class="rightNav_f6cde"><div class="flex sm:flex-1 items-center sm:pl-4 sm:pr-2"><div class="rspress-nav-search-button navSearchButton_6e282"><button><svg width="18" height="18" viewBox="0 0 32 32"><path fill="var(--rp-c-gray)" d="m29 27.586-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9 9.01 9.01 0 0 1-9-9Z"></path></svg><p class="searchWord_6e282">Search Docs</p><div style="opacity:0"><span></span><span>K</span></div></button></div><div class="mobileNavSearchButton_6e282"><svg width="24" height="24" viewBox="0 0 32 32"><path fill="var(--rp-c-gray)" d="m29 27.586-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9 9.01 9.01 0 0 1-9-9Z"></path></svg></div></div><div class="rspress-nav-menu menu h-14"><a class="link_03735  cursor-pointer" target="" href="/guide/index.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">开始学习</div></a><a class="link_03735  cursor-pointer" target="" href="/handwriting/index.html"><div class="rspress-nav-menu-item singleItem_f6cde activeItem_f6cde text-sm font-medium mx-1.5 px-3 py-2 flex items-center">手写系列</div></a><a class="link_03735  cursor-pointer" target="" href="/study/index.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">学习路线</div></a></div><div class="flex-center flex-row"><div class="mx-2"><div class="md:mr-2 rspress-nav-appearance"><div class="p-1 border border-solid border-gray-300 text-gray-400  cursor-pointer rounded-md hover:border-gray-600 hover:text-gray-600 dark:hover:border-gray-200 dark:hover:text-gray-200 transition-all duration-300 w-7 h-7"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 24 24" class="dark:hidden" width="18" height="18" fill="currentColor"><path d="M12 18c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6zm0-10c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4zM12 4c-.6 0-1-.4-1-1V1c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1zM12 24c-.6 0-1-.4-1-1v-2c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1zM5.6 6.6c-.3 0-.5-.1-.7-.3L3.5 4.9c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.1.2-.4.3-.7.3zM19.8 20.8c-.3 0-.5-.1-.7-.3l-1.4-1.4c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.2.2-.5.3-.7.3zM3 13H1c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1zM23 13h-2c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1zM4.2 20.8c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.4.3-.7.3zM18.4 6.6c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.5.3-.7.3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 24 24" class="hidden dark:block" width="18" height="18" fill="currentColor"><path d="M12.1 22h-.9c-5.5-.5-9.5-5.4-9-10.9.4-4.8 4.2-8.6 9-9 .4 0 .8.2 1 .5.2.3.2.8-.1 1.1-2 2.7-1.4 6.4 1.3 8.4 2.1 1.6 5 1.6 7.1 0 .3-.2.7-.3 1.1-.1.3.2.5.6.5 1-.2 2.7-1.5 5.1-3.6 6.8-1.9 1.4-4.1 2.2-6.4 2.2zM9.3 4.4c-2.9 1-5 3.6-5.2 6.8-.4 4.4 2.8 8.3 7.2 8.7 2.1.2 4.2-.4 5.8-1.8 1.1-.9 1.9-2.1 2.4-3.4-2.5.9-5.3.5-7.5-1.1-2.8-2.2-3.9-5.9-2.7-9.2z"></path></svg></div></div></div><div class="social-links menu-item_93d67 flex-center relative"><div class="flex-center h-full gap-x-4 transition-colors duration-300 md:mr-2"><a href="https://github.com/zhenghui-su" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_93d67"><svg role="img" viewBox="0 0 24 24" width="24" height="24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></div></a></div></div></div></div><div class="mobileNavMenu_f6cde"><div class="navScreen_457e8 " id="navScreen"><div class="container_457e8"><div class="navMenu_457e8"><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/guide/index.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">开始学习</div></a></div><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/handwriting/index.html"><div class="rspress-nav-menu-item singleItem_f6cde activeItem_f6cde text-sm font-medium mx-1.5 px-3 py-2 flex items-center">手写系列</div></a></div><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/study/index.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">学习路线</div></a></div></div><div class="flex-center flex-col gap-2"><div class="mt-2 navAppearance_457e8 flex justify-center"></div><div class="social-links menu-item_93d67 flex-center relative"><div class="flex-center h-full gap-x-4 transition-colors duration-300 md:mr-2"><a href="https://github.com/zhenghui-su" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_93d67"><svg role="img" viewBox="0 0 24 24" width="24" height="24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></div></a></div></div></div></div></div><button aria-label="mobile hamburger" class=" navHamburger_e7b06 text-gray-500"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="currentColor"><circle cx="8" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="24" cy="16" r="2" fill="currentColor"></circle></svg></button></div></div></div></div><section><div class="docLayout_edeb4 pt-0"><div class="rspress-sidebar-menu"><button class="flex-center mr-auto"><div class="text-md mr-2"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M4 6h24v2H4zm0 18h24v2H4zm0-12h24v2H4zm0 6h24v2H4z"></path></svg></div><span class="text-sm">Menu</span></button><button class="flex-center ml-auto"><span class="text-sm">On this page</span><div class="text-md mr-2" style="transform:rotate(0deg);transition:transform 0.2s ease-out;margin-top:2px"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></button></div><aside class="sidebar_71eca rspress-sidebar "><div class="sidebarContainer_71eca"><div class="navTitleMask_71eca"><div class="navBarTitle_f6cde"><a href="/" class="flex items-center w-full h-full text-base font-semibold transition-opacity duration-300 hover:opacity-60"><img src="/rspress-light-logo.png" alt="logo" id="logo" class="mr-4 rspress-logo dark:hidden"/><img src="/rspress-dark-logo.png" alt="logo" id="logo" class="mr-4 rspress-logo hidden dark:block"/></a></div></div><div class="mt-1 sidebarContent_71eca"><div class="rspress-scrollbar" style="max-height:calc(100vh - var(--rp-nav-height) - 8px);overflow:auto"><nav class="pb-2"><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/handwriting/index.html"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:14px;margin-left:0;border-radius:0 var(--rp-radius) var(--rp-radius) 0;padding-left:24px;font-weight:bold"><span class="flex-center">手写系列前言</span></div></a><section class="mt-0.5 block" style="margin-left:0"><div class="flex justify-between items-center menuItem_71eca" style="border-radius:0 var(--rp-radius) var(--rp-radius) 0;cursor:pointer"><h2 class="py-2 px-3 text-sm font-medium flex" style="font-size:14px;padding-left:24px;font-weight:bold"><span class="flex-center">手写create-react-app</span></h2><div class="collapseContainer_71eca p-2 rounded-xl"><div style="cursor:pointer;transition:transform 0.2s ease-out;transform:rotate(0deg)"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></div></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden;max-height:0"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:0;margin-left:12px"><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/handwriting/create-react-app/index.html"><div class="menuItemActive_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0;color:var(--rp-c-brand)"><span class="flex-center">手写create-reac-app</span></div></a></div></div></div></section></nav></div></div></div></aside><div class="content_edeb4 rspress-doc-container flex flex-shrink-0 mx-auto"><div class="w-full flex-1"><div><div class="rspress-doc"><!--$--><h2 id="从零手写-create-react-app" class="mt-14 mb-6 text-2xl tracking-tight title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#从零手写-create-react-app">#</a>从零手写 create-react-app</h2>
<p class="my-4 leading-7">前置知识：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">yarn包管理</li>
<li class="[&amp;:not(:first-child)]:mt-2">workspace工作区知识概念</li>
<li class="[&amp;:not(:first-child)]:mt-2">Monorepo知识概念</li>
</ul>
<h3 id="初始化" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#初始化">#</a>初始化</h3>
<p class="my-4 leading-7">一些知识科普讲解</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">Lerna 是一个用于管理具有多个包（packages）的 JavaScript 项目的工具。在一个大型 JavaScript 项目中，通常会有多个独立的模块或包，这些包可能相互依赖，或者需要一起发布。</p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">工作区（Workspace）通常是指在一个项目中，可以同时处理多个相关联的子项目（packages，modules等），而不需要将它们分别作为独立的项目来处理。在软件开发领域，工作区通常是指一个包含了多个子项目的项目容器，这些子项目可以共享一些配置、依赖关系和构建流程。</p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">Monorepo是 &quot;单一代码仓库&quot;（Monorepository）的缩写，它是一种软件开发的组织结构模式，其中所有项目或者库的代码都放在一个单一的版本控制仓库中。通常，这种仓库包含了多个相关的项目、库或者组件，这些项目可能共享某些代码、依赖关系或者配置。</p>
</li>
</ul>
<p class="my-4 leading-7">全局安装 lerna</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-bash" meta=""><span class="line line-number"><span style="color:var(--shiki-token-function)">npm</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">i</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">lerna@3.22.1</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">-g</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7">输入如下检测是否安装成功</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-bash" meta=""><span class="line line-number"><span style="color:var(--shiki-token-function)">lerna</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">-v</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7">在要创建的文件夹，打开终端，输入如下初始化</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-bash" meta=""><span class="line line-number"><span style="color:var(--shiki-token-function)">lerna</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">init</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7">打开后，这里我用 <strong class="font-semibold">yarn</strong>管理，终端输入</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-bash" meta=""><span class="line line-number"><span style="color:var(--shiki-token-function)">yarn</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">install</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7">两个作用：安装lerna和它的依赖，在根目录的node_modules里面创建软链接，链向各个packages中的各个包</p>
<blockquote class="border-l-2 border-solid border-divider pl-4 my-6 transition-colors duration-500 blockquote_3b154">
<p class="my-4 leading-7">yarn 支持workspace 	npm只有在7版本以上支持</p>
<p class="my-4 leading-7">yarn workspace    VS     lerna</p>
<p class="my-4 leading-7">yarn重点在于包管理、处理依赖和软链</p>
<p class="my-4 leading-7">lerna重点在于多个项目管理和发布</p>
</blockquote>
<p class="my-4 leading-7">然后创建 packages 文件夹（workspace），最终形成的初始文件目录如下</p>
<p class="my-4 leading-7"><img src="https://chen-1320883525.cos.ap-chengdu.myqcloud.com/img/image-20231004232629874.png" alt="image-20231004232629874"/></p>
<h3 id="创建-package" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#创建-package">#</a>创建 package</h3>
<h5 id="创建-create-react-app" class="title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#创建-create-react-app">#</a>创建 create-react-app</h5>
<p class="my-4 leading-7">在终端输入,然后在协议(license)改为 MIT，入口(main)改为<code>index.js</code>其它不变</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-bash" meta=""><span class="line line-number"><span style="color:var(--shiki-token-function)">lerna</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">create</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">create-react-app</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7">然后进入，把一些无用的删除，最终形成如下</p>
<p class="my-4 leading-7"><img src="https://chen-1320883525.cos.ap-chengdu.myqcloud.com/img/image-20231004233303465.png" alt="image-20231004233303465"/></p>
<h5 id="创建react-scripts" class="title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#创建react-scripts">#</a>创建react-scripts</h5>
<p class="my-4 leading-7">终端输入</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-bash" meta=""><span class="line line-number"><span style="color:var(--shiki-token-function)">lerna</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">create</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">react-scripts</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<h5 id="创建cra-template" class="title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#创建cra-template">#</a>创建cra-template</h5>
<p class="my-4 leading-7">终端输入</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-bash" meta=""><span class="line line-number"><span style="color:var(--shiki-token-function)">lerna</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">create</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">cra-template</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<h5 id="查看工作包" class="title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#查看工作包">#</a>查看工作包</h5>
<p class="my-4 leading-7">终端输入</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-bash" meta=""><span class="line line-number"><span style="color:var(--shiki-token-function)">yarn</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">workspaces</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">info</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7"><img src="https://chen-1320883525.cos.ap-chengdu.myqcloud.com/img/image-20231004234845726.png" alt="image-20231004234845726"/></p>
<p class="my-4 leading-7">最终形成的结构图如下</p>
<p class="my-4 leading-7"><img src="https://chen-1320883525.cos.ap-chengdu.myqcloud.com/img/image-20231004234956700.png" alt="image-20231004234956700"/></p>
<h3 id="添加依赖" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#添加依赖">#</a>添加依赖</h3>
<p class="my-4 leading-7">在添加之前记得要设置为淘宝源，不然可能会安装很慢</p>
<p class="my-4 leading-7">安装如下依赖</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-bash" meta=""><span class="line line-number"><span style="color:var(--shiki-token-function)">yarn</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">add</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">chalk</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">cross-spawn</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">fs-extra</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">--ignore-workspace-root-check</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<blockquote class="border-l-2 border-solid border-divider pl-4 my-6 transition-colors duration-500 blockquote_3b154">
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">chalk:</strong> <code>chalk</code> 是一个用于在终端中添加颜色和样式的库。它允许你在命令行界面中使用不同的颜色和样式来输出文本，使得输出更加清晰和易读。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">cross-spawn:</strong> <code>cross-spawn</code> 是一个用于跨平台（Windows、Linux、Mac 等）运行子进程的库。它解决了在不同操作系统下创建子进程的差异性，使得在 Node.js 环境中能够一致地运行子进程。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">fs-extra:</strong> <code>fs-extra</code> 是 Node.js 的文件系统模块（<code>fs</code> 模块）的扩展，提供了更多的功能和便捷的方法，使得文件和目录的操作更加容易和灵活。</li>
<li class="[&amp;:not(:first-child)]:mt-2"><strong class="font-semibold">--ignore-workspace-root-check</strong>:这是 <code>yarn add</code> 命令的一个选项。当你在一个使用 Yarn 工作区（Workspace）的项目中执行 <code>yarn add</code> 命令时，默认情况下 Yarn 会检查你是否在工作区的根目录（root）中运行该命令。如果你使用了 <code>--ignore-workspace-root-check</code> 选项，Yarn 将忽略这个检查，允许你在工作区的任意位置执行 <code>yarn add</code> 命令。</li>
</ul>
</blockquote>
<p class="my-4 leading-7">在lerna里面，packages里面的各个会在node_modules里面形成符号链接即软链，这样可以在别的package中访问另一个package</p>
<p class="my-4 leading-7"><img src="https://chen-1320883525.cos.ap-chengdu.myqcloud.com/img/image-20231004235537950.png" alt="image-20231004235537950"/></p>
<p class="my-4 leading-7">然后可以根据工作空间安装如下依赖</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-bash" meta=""><span class="line line-number"><span style="color:var(--shiki-token-function)">yarn</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">workspace</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">create-react-app</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">add</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">commander</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<blockquote class="border-l-2 border-solid border-divider pl-4 my-6 transition-colors duration-500 blockquote_3b154">
<p class="my-4 leading-7"><code>commander</code> 是一个用于构建命令行界面（CLI）的 Node.js 框架。它可以帮助开发者轻松地构建复杂和易用的命令行工具，提供了处理命令行参数、解析用户输入、显示帮助信息等功能</p>
</blockquote>
<h3 id="createreactappjs文件" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#createreactappjs文件">#</a>createReactApp.js文件</h3>
<p class="my-4 leading-7">在根目录<code>package.json</code>添加脚本命令</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-json"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-json" meta=""><span class="line line-number"><span style="color:var(--shiki-token-string-expression)">&quot;scripts&quot;</span><span style="color:var(--shiki-color-text)">: {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;create-react-app&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;node ./packages/create-react-app/index.js&quot;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">}</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7">在<code>packages</code>中的<code>create-react-app</code>文件夹的<code>index.js</code>文件更改</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-js" meta=""><span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> { </span><span style="color:var(--shiki-token-constant)">init</span><span style="color:var(--shiki-color-text)"> } </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;./createReactApp&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-token-function)">init</span><span style="color:var(--shiki-color-text)">();</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7">在<code>create-react-app</code>文件夹中新建<code>createReactApp.js</code>文件</p>
<blockquote class="border-l-2 border-solid border-divider pl-4 my-6 transition-colors duration-500 blockquote_3b154">
<p class="my-4 leading-7">由于接下来我们需要用到刚刚安装的依赖，我们可以快速学习一下</p>
</blockquote>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-js" meta=""><span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">chalk</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;chalk&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> {</span><span style="color:var(--shiki-token-constant)">Command</span><span style="color:var(--shiki-color-text)">} </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;commander&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">let</span><span style="color:var(--shiki-color-text)"> program </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">new</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">Command</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;create-react-app&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">program</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-function)">.version</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;1.0.0&#x27;</span><span style="color:var(--shiki-color-text)">) </span><span style="color:var(--shiki-token-comment)">// 设置版本号</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">	</span><span style="color:var(--shiki-token-function)">.arguments</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;&lt;must1&gt; &lt;must2&gt; [option1] [option2]&#x27;</span><span style="color:var(--shiki-color-text)">)</span><span style="color:var(--shiki-token-comment)">//设置命令行的参数格式 &lt;&gt;表示必选 []表示可选</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">	</span><span style="color:var(--shiki-token-function)">.usage</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">`</span><span style="color:var(--shiki-token-keyword)">${</span><span style="color:var(--shiki-token-constant)">chalk</span><span style="color:var(--shiki-token-function)">.green</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">`&lt;must1&gt; &lt;must2&gt; [option1] [option2]`</span><span style="color:var(--shiki-color-text)">)</span><span style="color:var(--shiki-token-keyword)">}</span><span style="color:var(--shiki-token-string-expression)">`</span><span style="color:var(--shiki-color-text)">) </span><span style="color:var(--shiki-token-comment)">// 设置用法说明，改颜色</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-function)">.action</span><span style="color:var(--shiki-color-text)">((must1</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)">must2</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)">option1</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)">option2)</span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)">{ </span><span style="color:var(--shiki-token-comment)">// 指令命令的行为</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">	})</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<h4 id="init函数" class="mt-8 leading-6 text-base title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#init函数">#</a>init函数</h4>
<p class="my-4 leading-7">然后我们开始写<code>createReactApp.js</code>文件</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-js" meta=""><span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> { </span><span style="color:var(--shiki-token-constant)">Command</span><span style="color:var(--shiki-color-text)"> } </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;commander&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">packageJSON</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;./package.json&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">chalk</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;chalk&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">function</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">init</span><span style="color:var(--shiki-color-text)">() {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">let</span><span style="color:var(--shiki-color-text)"> projectName;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">new</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">Command</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">packageJSON</span><span style="color:var(--shiki-color-text)">.name) </span><span style="color:var(--shiki-token-comment)">// 项目名</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-function)">.version</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">packageJSON</span><span style="color:var(--shiki-color-text)">.version) </span><span style="color:var(--shiki-token-comment)">// 版本号</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-function)">.arguments</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;&lt;project-directory&gt;&#x27;</span><span style="color:var(--shiki-color-text)">) </span><span style="color:var(--shiki-token-comment)">// 项目的目录名</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-function)">.usage</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">`</span><span style="color:var(--shiki-token-keyword)">${</span><span style="color:var(--shiki-token-constant)">chalk</span><span style="color:var(--shiki-token-function)">.green</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;&lt;project-directory&gt;&#x27;</span><span style="color:var(--shiki-color-text)">)</span><span style="color:var(--shiki-token-keyword)">}</span><span style="color:var(--shiki-token-string-expression)"> [options]`</span><span style="color:var(--shiki-color-text)">)</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-function)">.action</span><span style="color:var(--shiki-color-text)">(name </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            projectName </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> name;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        })</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-function)">.parse</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-color-text)">.argv); </span><span style="color:var(--shiki-token-comment)">// [node完整路径,当前node脚本的路径,...其它参数]</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;projectName&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)">projectName);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">}</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-token-constant)">module</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">exports</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    init</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">}</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7">如果报错等，可以修改<code>package.json</code>文件的chalk，高版本可能有错</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-json"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-json" meta=""><span class="line line-number"><span style="color:var(--shiki-token-string-expression)">&quot;dependencies&quot;</span><span style="color:var(--shiki-color-text)">: {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;chalk&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^4.1.2&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  }</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7">在终端运行如下测试是否成功</p>
<blockquote class="border-l-2 border-solid border-divider pl-4 my-6 transition-colors duration-500 blockquote_3b154">
<p class="my-4 leading-7">-- 后面代码传参</p>
</blockquote>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-bash" meta=""><span class="line line-number"><span style="color:var(--shiki-token-function)">npm</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">run</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">create-react-app</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">--</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">myApp</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7">此处我们传入项目名，最终终端会输出 myApp</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-bash" meta=""><span class="line line-number"><span style="color:var(--shiki-token-function)">projectName</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">myApp</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<h4 id="createapp函数" class="mt-8 leading-6 text-base title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#createapp函数">#</a>createApp函数</h4>
<p class="my-4 leading-7">然后在<code>createReactApp.js</code>中创建createApp函数，在init中添加，并修改init为async</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-js" meta=""><span class="line line-number"><span style="color:var(--shiki-token-keyword)">async</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">function</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">init</span><span style="color:var(--shiki-color-text)">() {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">...</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-comment)">// 上面代码搬运下来</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-function)">createApp</span><span style="color:var(--shiki-color-text)">(projectName)</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">}</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<blockquote class="border-l-2 border-solid border-divider pl-4 my-6 transition-colors duration-500 blockquote_3b154">
<p class="my-4 leading-7">这里用到了path模块和fs-extra模块</p>
</blockquote>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-js" meta=""><span class="line line-number"><span style="color:var(--shiki-token-keyword)">async</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">function</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">createApp</span><span style="color:var(--shiki-color-text)">(appName) { </span><span style="color:var(--shiki-token-comment)">// projectName = appName</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">let</span><span style="color:var(--shiki-color-text)"> root </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">path</span><span style="color:var(--shiki-token-function)">.resolve</span><span style="color:var(--shiki-color-text)">(appName); </span><span style="color:var(--shiki-token-comment)">// 得到将生成项目绝对路径</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-constant)">fs</span><span style="color:var(--shiki-token-function)">.ensureDirSync</span><span style="color:var(--shiki-color-text)">(appName);</span><span style="color:var(--shiki-token-comment)">// 保证此目录是存在的，如果不存在则创建</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">`Creating a new React app in </span><span style="color:var(--shiki-token-keyword)">${</span><span style="color:var(--shiki-token-constant)">chalk</span><span style="color:var(--shiki-token-function)">.green</span><span style="color:var(--shiki-color-text)">(root)</span><span style="color:var(--shiki-token-keyword)">}</span><span style="color:var(--shiki-token-string-expression)">.`</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">packageJSON</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        name</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> appName</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        version</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;0.1.0&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        private</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">true</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    }</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-comment)">// 写入</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-constant)">fs</span><span style="color:var(--shiki-token-function)">.writeFileSync</span><span style="color:var(--shiki-color-text)">(</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-constant)">path</span><span style="color:var(--shiki-token-function)">.join</span><span style="color:var(--shiki-color-text)">(root</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;package.json&#x27;</span><span style="color:var(--shiki-color-text)">)</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-constant)">JSON</span><span style="color:var(--shiki-token-function)">.stringify</span><span style="color:var(--shiki-color-text)">(packageJSON</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">null</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">2</span><span style="color:var(--shiki-color-text)">)</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    );</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">originalDirectory</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-token-function)">.cwd</span><span style="color:var(--shiki-color-text)">(); </span><span style="color:var(--shiki-token-comment)">// 原始的命令工作目录</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-token-function)">.chdir</span><span style="color:var(--shiki-color-text)">(root); </span><span style="color:var(--shiki-token-comment)">// change directory 改变工作目录</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;appName&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)">appName);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;root&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)">root);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;originalDirectory&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> originalDirectory); </span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">}</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7">在终端执行,就会生成一个文件夹myApp并有一个package.json文件了</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-bash" meta=""><span class="line line-number"><span style="color:var(--shiki-token-function)">npm</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">run</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">create-react-app</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">--</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">myApp</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7"><img src="https://chen-1320883525.cos.ap-chengdu.myqcloud.com/img/image-20231005013532488.png" alt="image-20231005013532488"/></p>
<blockquote class="border-l-2 border-solid border-divider pl-4 my-6 transition-colors duration-500 blockquote_3b154">
<p class="my-4 leading-7">扩展 JSON.stringify</p>
<p class="my-4 leading-7">如下代码</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-js" meta=""><span class="line line-number"><span style="color:var(--shiki-token-keyword)">let</span><span style="color:var(--shiki-color-text)"> obj </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> {name</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-string-expression)">&#x27;chenchen&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)">age</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)">20</span><span style="color:var(--shiki-color-text)">};</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">let</span><span style="color:var(--shiki-color-text)"> result </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">JSON</span><span style="color:var(--shiki-token-function)">.stringify</span><span style="color:var(--shiki-color-text)">(obj</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)">replacer</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-constant)">2</span><span style="color:var(--shiki-color-text)">); </span><span style="color:var(--shiki-token-comment)">// replacer 替换器 2 为缩进空格</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">function</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">replacer</span><span style="color:var(--shiki-color-text)">(key</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)">value){</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(key</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)">value);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">if</span><span style="color:var(--shiki-color-text)">(key </span><span style="color:var(--shiki-token-keyword)">==</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;age&#x27;</span><span style="color:var(--shiki-color-text)">) </span><span style="color:var(--shiki-token-keyword)">return</span><span style="color:var(--shiki-color-text)"> value</span><span style="color:var(--shiki-token-keyword)">*</span><span style="color:var(--shiki-token-constant)">2</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">return</span><span style="color:var(--shiki-color-text)"> value;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">}</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(result);</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7">打印结果如下</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-bash" meta=""><span class="line line-number"><span style="color:var(--shiki-color-text)">{</span><span style="color:var(--shiki-token-function)">name:</span><span style="color:var(--shiki-token-function)">&#x27;chenchen&#x27;</span><span style="color:var(--shiki-token-function)">,age:20}</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">//原始的obj</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-function)">name</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">chenchen</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">//</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">replacer的console.log</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-function)">key,value</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-function)">age</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">10</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">//</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">replacer的console.log</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-function)">key,value</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">{</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">	</span><span style="color:var(--shiki-token-function)">&quot;name&quot;</span><span style="color:var(--shiki-token-function)">:</span><span style="color:var(--shiki-token-function)">&quot;chenchen&quot;</span><span style="color:var(--shiki-token-function)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">//前面的缩进就是上面定义的2空格</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">	</span><span style="color:var(--shiki-token-function)">&quot;age&quot;</span><span style="color:var(--shiki-token-function)">:20</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">} // 替换后结果</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
</blockquote>
<h4 id="run函数" class="mt-8 leading-6 text-base title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#run函数">#</a>run函数</h4>
<p class="my-4 leading-7">在createApp函数最后加上执行run函数</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-js" meta=""><span class="line line-number"><span style="color:var(--shiki-token-keyword)">async</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">function</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">createApp</span><span style="color:var(--shiki-color-text)">(appName) {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">...</span><span style="color:var(--shiki-token-comment)">//上面代码</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">await</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">run</span><span style="color:var(--shiki-color-text)">(root</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> appName</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> originalDirectory);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">}</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7">创建run函数</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-js" meta=""><span class="line line-number"><span style="color:var(--shiki-token-keyword)">async</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">function</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">run</span><span style="color:var(--shiki-color-text)">(root</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> appName</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> originalDirectory) {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">let</span><span style="color:var(--shiki-color-text)"> scriptName </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;react-scripts&#x27;</span><span style="color:var(--shiki-color-text)">; </span><span style="color:var(--shiki-token-comment)">// create生成的代码里 源文件编译，启动服务放在了react-scripts</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">let</span><span style="color:var(--shiki-color-text)"> templateName </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;cra-template&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">allDependencies</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> [</span><span style="color:var(--shiki-token-string-expression)">&#x27;react&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;react-dom&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> scriptName</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> templateName];</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;Installing packages. This might take a couple of minutes.&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-comment)">// Installing react, react-dom, and react-scripts with cra-template</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-string-expression)">`Installing </span><span style="color:var(--shiki-token-keyword)">${</span><span style="color:var(--shiki-token-constant)">chalk</span><span style="color:var(--shiki-token-function)">.cyan</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;react&#x27;</span><span style="color:var(--shiki-color-text)">)</span><span style="color:var(--shiki-token-keyword)">}</span><span style="color:var(--shiki-token-string-expression)">, </span><span style="color:var(--shiki-token-keyword)">${</span><span style="color:var(--shiki-token-constant)">chalk</span><span style="color:var(--shiki-token-function)">.cyan</span><span style="color:var(--shiki-color-text)">(</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            </span><span style="color:var(--shiki-token-string-expression)">&#x27;react-dom&#x27;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        )</span><span style="color:var(--shiki-token-keyword)">}</span><span style="color:var(--shiki-token-string-expression)">, and </span><span style="color:var(--shiki-token-keyword)">${</span><span style="color:var(--shiki-token-constant)">chalk</span><span style="color:var(--shiki-token-function)">.cyan</span><span style="color:var(--shiki-color-text)">(scriptName)</span><span style="color:var(--shiki-token-keyword)">}${</span><span style="color:var(--shiki-token-string-expression)">` with </span><span style="color:var(--shiki-token-keyword)">${</span><span style="color:var(--shiki-token-constant)">chalk</span><span style="color:var(--shiki-token-function)">.cyan</span><span style="color:var(--shiki-color-text)">(templateName)</span><span style="color:var(--shiki-token-keyword)">}</span><span style="color:var(--shiki-token-string-expression)">`</span><span style="color:var(--shiki-token-keyword)">}</span><span style="color:var(--shiki-token-string-expression)">...`</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    );</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">await</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">install</span><span style="color:var(--shiki-color-text)">(root</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)">allDependencies);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">}</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<h4 id="install函数" class="mt-8 leading-6 text-base title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#install函数">#</a>install函数</h4>
<blockquote class="border-l-2 border-solid border-divider pl-4 my-6 transition-colors duration-500 blockquote_3b154">
<p class="my-4 leading-7">这里用到了cross-spawn模块，记得导入</p>
</blockquote>
<p class="my-4 leading-7">创建install函数</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-js" meta=""><span class="line line-number"><span style="color:var(--shiki-token-keyword)">async</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">function</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">install</span><span style="color:var(--shiki-color-text)">(root</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)">allDependencies) {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">return</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">new</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">Promise</span><span style="color:var(--shiki-color-text)">(resolve </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)">{</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">command</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;yarnpkg&#x27;</span><span style="color:var(--shiki-color-text)">; </span><span style="color:var(--shiki-token-comment)">//yarnpkg = yarn</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">args</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> [</span><span style="color:var(--shiki-token-string-expression)">&#x27;add&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;--exact&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">...</span><span style="color:var(--shiki-color-text)">allDependencies</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;--cwd&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> root];</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(command</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)">args);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">child</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">spawn</span><span style="color:var(--shiki-color-text)">(command</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> args</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> { stdio</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;inherit&#x27;</span><span style="color:var(--shiki-color-text)"> });</span><span style="color:var(--shiki-token-comment)">//stdio = &#x27;inherit&#x27; 表示子进程的输出会直接打印到父进程中</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-constant)">child</span><span style="color:var(--shiki-token-function)">.on</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;close&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)">resolve); </span><span style="color:var(--shiki-token-comment)">// 回调执行</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    })</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">}</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<blockquote class="border-l-2 border-solid border-divider pl-4 my-6 transition-colors duration-500 blockquote_3b154">
<p class="my-4 leading-7"><code>cross-spawn</code> 是一个用于跨平台（Windows、Linux 和 macOS）的 Node.js 包，用于跨平台地启动子进程。</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-js" meta=""><span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">child</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">spawn</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;npm&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> [</span><span style="color:var(--shiki-token-string-expression)">&#x27;install&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;some-package&#x27;</span><span style="color:var(--shiki-color-text)">]);</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7">换成这个就熟悉了吧</p>
</blockquote>
<h4 id="executenodescript函数" class="mt-8 leading-6 text-base title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#executenodescript函数">#</a>executeNodeScript函数</h4>
<blockquote class="border-l-2 border-solid border-divider pl-4 my-6 transition-colors duration-500 blockquote_3b154">
<p class="my-4 leading-7">拷贝模板的文件</p>
</blockquote>
<p class="my-4 leading-7">在run函数中补充</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-js" meta=""><span class="line line-number"><span style="color:var(--shiki-token-keyword)">async</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">function</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">run</span><span style="color:var(--shiki-color-text)">(root</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> appName</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> originalDirectory) {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">...</span><span style="color:var(--shiki-token-comment)">//上面代码</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-comment)">//项目根目录    项目名字   verbose是否显示详细信息 原始的目录 模板名称cra-template</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">let</span><span style="color:var(--shiki-color-text)"> data </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> [root</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> appName</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">true</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> originalDirectory</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> templateName];</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">let</span><span style="color:var(--shiki-color-text)"> source </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">`</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-string-expression)">    const init = require(&#x27;react-scripts/scripts/init.js&#x27;);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-string-expression)">    init.apply(null, JSON.parse(process.argv[1]));</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-string-expression)">    `</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">await</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">executeNodeScript</span><span style="color:var(--shiki-color-text)">({cwd</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-token-function)">.cwd</span><span style="color:var(--shiki-color-text)">()}</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)">data</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)">source);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;Done.&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-token-function)">.exit</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">0</span><span style="color:var(--shiki-color-text)">); </span><span style="color:var(--shiki-token-comment)">//退出</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">}</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7">创建executeNodeScript函数</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-js" meta=""><span class="line line-number"><span style="color:var(--shiki-token-keyword)">async</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">function</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">executeNodeScript</span><span style="color:var(--shiki-color-text)">({ cwd }</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> data</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> source) {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">return</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">new</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">Promise</span><span style="color:var(--shiki-color-text)">((resolve) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">child</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">spawn</span><span style="color:var(--shiki-color-text)">(</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            </span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-color-text)">.execPath</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-comment)">//node可执行文件的路径</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            [</span><span style="color:var(--shiki-token-string-expression)">&#x27;-e&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> source</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;--&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">JSON</span><span style="color:var(--shiki-token-function)">.stringify</span><span style="color:var(--shiki-color-text)">(data)]</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            { cwd</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> stdio</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;inherit&#x27;</span><span style="color:var(--shiki-color-text)"> }</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        );</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-constant)">child</span><span style="color:var(--shiki-token-function)">.on</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;close&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> resolve);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    });</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">}</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<blockquote class="border-l-2 border-solid border-divider pl-4 my-6 transition-colors duration-500 blockquote_3b154">
<p class="my-4 leading-7">上述简化的意思是通过node执行脚本</p>
<p class="my-4 leading-7">即把data里面的数据放到了node后面</p>
<p class="my-4 leading-7">如下，执行出来就是输出aaa</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-bash" meta=""><span class="line line-number"><span style="color:var(--shiki-token-function)">node</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">-e</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;console.log(&#x27;aaa&#x27;)&quot;</span><span style="color:var(--shiki-color-text)"> </span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7">process.argv是一个包含命令行参数的数组</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-bash" meta=""><span class="line line-number"><span style="color:var(--shiki-token-function)">node</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">-e</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;console.log(process.argv)&quot;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">--</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">a</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">b</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">c</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7">如下输出 就会发现上面abc也带入了</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-bash" meta=""><span class="line line-number"><span style="color:var(--shiki-color-text)">[</span><span style="color:var(--shiki-token-string-expression)">&#x27;C:\\Progaram Files\\nodejs\\node.exe&#x27;</span><span style="color:var(--shiki-color-text)">,</span><span style="color:var(--shiki-token-string-expression)">&#x27;a&#x27;</span><span style="color:var(--shiki-color-text)">,</span><span style="color:var(--shiki-token-string-expression)">&#x27;b&#x27;</span><span style="color:var(--shiki-color-text)">,</span><span style="color:var(--shiki-token-string-expression)">&#x27;c&#x27;</span><span style="color:var(--shiki-color-text)">]</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
</blockquote>
<p class="my-4 leading-7">此时基本完成，我们在终端输入</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-bash"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-bash" meta=""><span class="line line-number"><span style="color:var(--shiki-token-function)">npm</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">run</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">create-react-app</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">--</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string)">bbb</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7">安装上述的四个模块</p>
<p class="my-4 leading-7"><img src="https://chen-1320883525.cos.ap-chengdu.myqcloud.com/img/image-20231005153831814.png" alt="image-20231005153831814"/></p>
<p class="my-4 leading-7">拷贝模板文件到bbb文件夹下</p>
<p class="my-4 leading-7"><img src="https://chen-1320883525.cos.ap-chengdu.myqcloud.com/img/image-20231005153929823.png" alt="image-20231005153929823"/></p>
<p class="my-4 leading-7">然后会删除cra-template模块因为拷贝完了</p>
<p class="my-4 leading-7"><img src="https://chen-1320883525.cos.ap-chengdu.myqcloud.com/img/image-20231005154009464.png" alt="image-20231005154009464"/></p>
<p class="my-4 leading-7">最终安装成功，<code>cd bbb</code>切换到bbb文件夹，输入<code>yarn start</code>查看是否启动成功</p>
<p class="my-4 leading-7"><img src="https://chen-1320883525.cos.ap-chengdu.myqcloud.com/img/image-20231005154209323.png" alt="image-20231005154209323"/></p>
<p class="my-4 leading-7">查看bbb文件目录，发现和我们平时用cra创建的一样</p>
<p class="my-4 leading-7"><img src="https://chen-1320883525.cos.ap-chengdu.myqcloud.com/img/image-20231005154332617.png" alt="image-20231005154332617"/></p>
<p class="my-4 leading-7"><strong class="font-semibold">至此手写create-react-app已完成</strong></p>
<h3 id="手写react-scripts编译" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#手写react-scripts编译">#</a>手写react-scripts编译</h3>
<blockquote class="border-l-2 border-solid border-divider pl-4 my-6 transition-colors duration-500 blockquote_3b154">
<p class="my-4 leading-7">create-react-app流程</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">执行命令</li>
<li class="[&amp;:not(:first-child)]:mt-2">创建了一个React项目</li>
<li class="[&amp;:not(:first-child)]:mt-2">安装依赖包</li>
<li class="[&amp;:not(:first-child)]:mt-2">初始化git，拷贝模板，安装模板依赖</li>
<li class="[&amp;:not(:first-child)]:mt-2">移除模板，成功</li>
</ul>
</blockquote>
<p class="my-4 leading-7"><img src="https://chen-1320883525.cos.ap-chengdu.myqcloud.com/img/image-20231005160524479.png" alt="image-20231005160524479"/></p>
<h4 id="react-scriptsjs" class="mt-8 leading-6 text-base title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#react-scriptsjs">#</a>react-scripts.js</h4>
<h5 id="初始化-1" class="title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#初始化-1">#</a>初始化</h5>
<p class="my-4 leading-7">在package.json中配置</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-js" meta=""><span class="line line-number"><span style="color:var(--shiki-token-string-expression)">&quot;bin&quot;</span><span style="color:var(--shiki-color-text)">: {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-string-expression)">&quot;react-scripts&quot;</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;./bin/react-scripts.js&quot;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7">在根目录的package.json配置</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-js" meta=""><span class="line line-number"><span style="color:var(--shiki-token-string-expression)">&quot;scripts&quot;</span><span style="color:var(--shiki-color-text)">: {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-string-expression)">&quot;create-react-app&quot;</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;node ./packages/create-react-app/index.js&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-string-expression)">&quot;build&quot;</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;cd packages/react-scripts &amp;&amp; node bin/react-scripts.js build&quot;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  }</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7">在<code>react-scripts</code>文件夹创建bin文件夹，并创建<code>react-scripts.js</code>文件</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-js" meta=""><span class="line line-number"><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&quot;done&quot;</span><span style="color:var(--shiki-color-text)">);</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7">终端执行<code>npm run build</code>，输出<code>done</code>证明成功</p>
<h5 id="书写" class="title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#书写">#</a>书写</h5>
<p class="my-4 leading-7">在<code>react-scripts</code>文件夹下新建<code>scripts</code>文件夹，并创建<code>build.js</code>文件</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-js" meta=""><span class="line line-number"><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;build.js&#x27;</span><span style="color:var(--shiki-color-text)">)</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7">书写<code>react-scripts.js</code>文件</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-js" meta=""><span class="line line-number"><span style="color:var(--shiki-token-comment)">// 开启子进程</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">spawn</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;cross-spawn&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// 获取命令行参数 [&#x27;build&#x27;]</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">args</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-token-function)">.</span><span style="color:var(--shiki-token-constant)">argv</span><span style="color:var(--shiki-token-function)">.slice</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">2</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">script</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> args[</span><span style="color:var(--shiki-token-constant)">0</span><span style="color:var(--shiki-color-text)">]; </span><span style="color:var(--shiki-token-comment)">// build</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// 以同步方式开始子进程执行scripts下面的build.js脚本</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-constant)">spawn</span><span style="color:var(--shiki-token-function)">.sync</span><span style="color:var(--shiki-color-text)">(</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-color-text)">.execPath</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-comment)">// node的可执行文件路径</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    [</span><span style="color:var(--shiki-token-constant)">require</span><span style="color:var(--shiki-token-function)">.resolve</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;../scripts/&#x27;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">+</span><span style="color:var(--shiki-color-text)"> script)]</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-comment)">// 执行对应命令的文件如build.js</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    { stdio</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;inherit&#x27;</span><span style="color:var(--shiki-color-text)"> } </span><span style="color:var(--shiki-token-comment)">// 让父进程和子进程共享输入输出</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">)</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7">根目录终端输入<code>npm run build</code>，输出<code>build.js</code>证明成功</p>
<h4 id="buildjs" class="mt-8 leading-6 text-base title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#buildjs">#</a>build.js</h4>
<p class="my-4 leading-7">在<code>react-scripts</code>文件夹下新建<code>config</code>文件夹，并创建<code>webpack.config.js</code>文件和<code>path.js</code>文件</p>
<blockquote class="border-l-2 border-solid border-divider pl-4 my-6 transition-colors duration-500 blockquote_3b154">
<p class="my-4 leading-7">在根目录下缺少什么依赖就安装什么依赖，如@babel/preset-react</p>
</blockquote>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-js" meta=""><span class="line line-number"><span style="color:var(--shiki-token-comment)">/**</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)"> * 生产webpack配置文件工厂</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)"> * </span><span style="color:var(--shiki-token-keyword)">@param</span><span style="color:var(--shiki-token-comment)"> </span><span style="color:var(--shiki-token-function)">{*}</span><span style="color:var(--shiki-token-comment)"> webpackEnv 环境信息 development production</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)"> */</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">path</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;path&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;./paths&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">HtmlWebpackPlugin</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;html-webpack-plugin&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-constant)">module</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">exports</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">function</span><span style="color:var(--shiki-color-text)"> (webpackEnv) {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">isEnvDevelopment</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> webpackEnv </span><span style="color:var(--shiki-token-keyword)">===</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;development&#x27;</span><span style="color:var(--shiki-color-text)">; </span><span style="color:var(--shiki-token-comment)">// 是否是开发环境</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">isEnvProduction</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> webpackEnv </span><span style="color:var(--shiki-token-keyword)">===</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;production&#x27;</span><span style="color:var(--shiki-color-text)">; </span><span style="color:var(--shiki-token-comment)">// 是否是生产环境</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">return</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        mode</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> isEnvProduction </span><span style="color:var(--shiki-token-keyword)">?</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;production&#x27;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> isEnvDevelopment </span><span style="color:var(--shiki-token-keyword)">&amp;&amp;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;development&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        output</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            path</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.appBuild</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        module</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            rules</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    test</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-string-expression)"> /\.(js</span><span style="color:var(--shiki-token-keyword)">|</span><span style="color:var(--shiki-token-string-expression)">jsx</span><span style="color:var(--shiki-token-keyword)">|</span><span style="color:var(--shiki-token-string-expression)">ts</span><span style="color:var(--shiki-token-keyword)">|</span><span style="color:var(--shiki-token-string-expression)">tsx)</span><span style="color:var(--shiki-token-keyword)">$</span><span style="color:var(--shiki-token-string-expression)">/</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    include</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.appSrc</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-comment)">//只转译src目录下面的文件</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    use</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [{</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        loader</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;babel-loader&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        options</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            presets</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [</span><span style="color:var(--shiki-token-string-expression)">&#x27;@babel/preset-react&#x27;</span><span style="color:var(--shiki-color-text)">]</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        }</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    }]</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                }</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            ]</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        plugins</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            </span><span style="color:var(--shiki-token-keyword)">new</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">HtmlWebpackPlugin</span><span style="color:var(--shiki-color-text)">({</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                inject</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">true</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                template</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.appHtml</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            })</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        ]</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    }</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">}</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-js" meta=""><span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">path</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;path&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">appDirectory</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-token-function)">.cwd</span><span style="color:var(--shiki-color-text)">();</span><span style="color:var(--shiki-token-comment)">//当前的工作目录</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// 接收一个相对路径，返回一个从应用目录出发的绝对路径</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">resolveApp</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> relativePath </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">path</span><span style="color:var(--shiki-token-function)">.resolve</span><span style="color:var(--shiki-color-text)">(appDirectory</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> relativePath);</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-token-constant)">module</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">exports</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    appBuild</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">resolveApp</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;build&#x27;</span><span style="color:var(--shiki-color-text)">)</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-comment)">// 指向打包后的输出目录 webpack默认是dist</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    appHtml</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">resolveApp</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;public/index.html&#x27;</span><span style="color:var(--shiki-color-text)">)</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-comment)">// html模板给html-webpack-plugin用的</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    appIndexJs</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">resolveApp</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;src/index.js&#x27;</span><span style="color:var(--shiki-color-text)">)</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-comment)">// 默认的入口文件</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    appPublic</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">resolveApp</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;public&#x27;</span><span style="color:var(--shiki-color-text)">)</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">}</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7"><strong class="font-semibold">书写build.js文件</strong></p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-js" meta=""><span class="line line-number"><span style="color:var(--shiki-token-comment)">// 1.设置环境变量为生产环境</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">env</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">NODE_ENV</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;production&#x27;</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">fs</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;fs-extra&#x27;</span><span style="color:var(--shiki-color-text)">);</span><span style="color:var(--shiki-token-comment)">//加强版的fs</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">webpack</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;webpack&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// 2.获取webpack的配置文件</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">configFactory</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;../config/webpack.config&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;../config/paths&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">chalk</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;chalk&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">config</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">configFactory</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;production&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// 3.如果build目录不为空，要把build目录清空</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-constant)">fs</span><span style="color:var(--shiki-token-function)">.emptyDirSync</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.appBuild);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// 4.拷贝public下面的静态文件到build目录</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-function)">copyPublicFolder</span><span style="color:var(--shiki-color-text)">();</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-function)">build</span><span style="color:var(--shiki-color-text)">();</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">function</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">build</span><span style="color:var(--shiki-color-text)">() {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-comment)">// compiler是总的编译对象</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">let</span><span style="color:var(--shiki-color-text)"> compiler </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">webpack</span><span style="color:var(--shiki-color-text)">(config);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-comment)">// 开始启动编译</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-constant)">compiler</span><span style="color:var(--shiki-token-function)">.run</span><span style="color:var(--shiki-color-text)">((err</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> stats) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(err);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(stats);</span><span style="color:var(--shiki-token-comment)">//它是一个描述对象，描述本次打包出来的结果</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">chalk</span><span style="color:var(--shiki-token-function)">.green</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;Compiled successfully!&#x27;</span><span style="color:var(--shiki-color-text)">));</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    });</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">}</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">function</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">copyPublicFolder</span><span style="color:var(--shiki-color-text)">() {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-constant)">fs</span><span style="color:var(--shiki-token-function)">.copySync</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.appPublic</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.appBuild</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-function)">filter</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> file </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> file </span><span style="color:var(--shiki-token-keyword)">!==</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.appHtml </span><span style="color:var(--shiki-token-comment)">// index.html文件交由插件编译处理，它不需要拷贝</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    });</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">}</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7">在react-scripts目录随意创建public和src，public创建index.html并添加id为root的div，src创建index.js并输入如下</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-js" meta=""><span class="line line-number"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-color-text)"> React </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;react&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">import</span><span style="color:var(--shiki-color-text)"> ReactDom </span><span style="color:var(--shiki-token-keyword)">from</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;react-dom&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-token-constant)">ReactDom</span><span style="color:var(--shiki-token-function)">.render</span><span style="color:var(--shiki-color-text)">(&lt;</span><span style="color:var(--shiki-token-string-expression)">h1</span><span style="color:var(--shiki-color-text)">&gt;Hello World&lt;/</span><span style="color:var(--shiki-token-string-expression)">h1</span><span style="color:var(--shiki-color-text)">&gt;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">document</span><span style="color:var(--shiki-token-function)">.getElementById</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;root&#x27;</span><span style="color:var(--shiki-color-text)">));</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7">在react-scripts中修改package.json,并安装</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-json"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-json" meta=""><span class="line line-number"><span style="color:var(--shiki-token-string-expression)">&quot;dependencies&quot;</span><span style="color:var(--shiki-color-text)">: {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;@babel/core&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^7.16.0&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;@pmmmwh/react-refresh-webpack-plugin&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^0.5.3&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;@svgr/webpack&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^5.5.0&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;babel-jest&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^27.4.2&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;babel-loader&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^8.2.3&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;babel-plugin-named-asset-import&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^0.3.8&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;babel-preset-react-app&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^10.0.1&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;bfj&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^7.0.2&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;browserslist&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^4.18.1&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;camelcase&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^6.2.1&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;case-sensitive-paths-webpack-plugin&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^2.4.0&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;css-loader&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^6.5.1&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;css-minimizer-webpack-plugin&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^3.2.0&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;dotenv&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^10.0.0&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;dotenv-expand&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^5.1.0&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;eslint&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^8.3.0&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;eslint-config-react-app&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^7.0.1&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;eslint-webpack-plugin&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^3.1.1&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;file-loader&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^6.2.0&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;fs-extra&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^10.0.0&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;html-webpack-plugin&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^5.5.0&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;identity-obj-proxy&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^3.0.0&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;jest&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^27.4.3&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;jest-resolve&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^27.4.2&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;jest-watch-typeahead&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^1.0.0&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;mini-css-extract-plugin&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^2.4.5&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;postcss&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^8.4.4&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;postcss-flexbugs-fixes&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^5.0.2&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;postcss-loader&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^6.2.1&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;postcss-normalize&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^10.0.1&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;postcss-preset-env&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^7.0.1&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;prompts&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^2.4.2&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;react-app-polyfill&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^3.0.0&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;react-dev-utils&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^12.0.1&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;react-refresh&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^0.11.0&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;resolve&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^1.20.0&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;resolve-url-loader&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^4.0.0&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;sass-loader&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^12.3.0&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;semver&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^7.3.5&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;source-map-loader&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^3.0.0&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;style-loader&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^3.3.1&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;tailwindcss&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^3.0.2&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;terser-webpack-plugin&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^5.2.5&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;webpack&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^5.64.4&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;webpack-dev-server&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^4.6.0&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;webpack-manifest-plugin&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^4.0.2&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;workbox-webpack-plugin&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^6.4.1&quot;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  },</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-string-expression)">&quot;devDependencies&quot;</span><span style="color:var(--shiki-color-text)">: {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;react&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^18.0.0&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;react-dom&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^18.0.0&quot;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  },</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-string-expression)">&quot;optionalDependencies&quot;</span><span style="color:var(--shiki-color-text)">: {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;fsevents&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^2.3.2&quot;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  },</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-string-expression)">&quot;peerDependencies&quot;</span><span style="color:var(--shiki-color-text)">: {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;react&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;&gt;= 16&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;typescript&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&quot;^3.2.1 || ^4&quot;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  },</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-string-expression)">&quot;peerDependenciesMeta&quot;</span><span style="color:var(--shiki-color-text)">: {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;typescript&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-keyword)">&quot;optional&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">true</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    }</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  },</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-string-expression)">&quot;browserslist&quot;</span><span style="color:var(--shiki-color-text)">: {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;production&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> [</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-string-expression)">&quot;&gt;0.2%&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-string-expression)">&quot;not dead&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-string-expression)">&quot;not op_mini all&quot;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    ]</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">&quot;development&quot;</span><span style="color:var(--shiki-token-punctuation)">:</span><span style="color:var(--shiki-color-text)"> [</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-string-expression)">&quot;last 1 chrome version&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-string-expression)">&quot;last 1 firefox version&quot;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-string-expression)">&quot;last 1 safari version&quot;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    ]</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  }</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7">随后终端输入<code>npm run build</code>，成功打包，生成build目录里面有所创建的压缩文件</p>
<h4 id="start命令" class="mt-8 leading-6 text-base title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#start命令">#</a>start命令</h4>
<p class="my-4 leading-7">根目录package.json配置,与build一样</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-js" meta=""><span class="line line-number"><span style="color:var(--shiki-token-string-expression)">&quot;start&quot;</span><span style="color:var(--shiki-color-text)">: </span><span style="color:var(--shiki-token-string-expression)">&quot;cd packages/react-scripts &amp;&amp; node bin/react-scripts.js start&quot;</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7">在在react-scripts的config里新建webpackDevServer.config.js</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-js" meta=""><span class="line line-number"><span style="color:var(--shiki-token-constant)">module</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">exports</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">function</span><span style="color:var(--shiki-color-text)"> () {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">return</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        hot</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">true</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-comment)">// 热更新</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    }</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">}</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7">在react-scripts的scripts里新建start.js</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-js" meta=""><span class="line line-number"><span style="color:var(--shiki-token-comment)">// 1.设置环境变量为开发环境</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">env</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">NODE_ENV</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;development&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// 2.获取配置文件的工厂</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">configFactory</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;../config/webpack.config&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">config</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">configFactory</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;development&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">//3.创建compiler编译对象</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">chalk</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;chalk&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">webpack</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;webpack&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// @ts-ignore</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">compiler</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">webpack</span><span style="color:var(--shiki-color-text)">(config);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// 4.获取devServer的配置对象</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">createDevServerConfig</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;../config/webpackDevServer.config&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">serverConfig</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">createDevServerConfig</span><span style="color:var(--shiki-color-text)">();</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">webpackDevServer</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;webpack-dev-server&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">/**</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)"> * 1.内部会启动compiler的编译</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)"> * 2.会启动一个http服务器并返回编译后的结果</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)"> */</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">devServer</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">new</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">webpackDevServer</span><span style="color:var(--shiki-color-text)">(compiler</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> serverConfig);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// 启动一个HTTP开发服务器，监听3000端口</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-constant)">devServer</span><span style="color:var(--shiki-token-function)">.listen</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">3000</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;localhost&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> () </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">chalk</span><span style="color:var(--shiki-token-function)">.cyan</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;Starting the development server...&#x27;</span><span style="color:var(--shiki-color-text)">))</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">});</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<p class="my-4 leading-7">在终端输入<code>npm run start</code>就会看到我们上面创建index.js所要显示的Hello World</p>
<p class="my-4 leading-7"><strong class="font-semibold">至此build和start命令我们都完成了，下面有源码讲解，如果上面有点吃力，建议再加深知识后来查看。</strong></p>
<h2 id="源码解析" class="mt-14 mb-6 text-2xl tracking-tight title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#源码解析">#</a>源码解析</h2>
<h3 id="react-scriptsjs源码" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#react-scriptsjs源码">#</a>react-scripts.js源码</h3>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-js" meta=""><span class="line line-number"><span style="color:var(--shiki-token-string-expression)">&#x27;use strict&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// 使脚本在未处理的拒绝时崩溃，而不是静默</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// 忽略它们。将来，未处理的promise拒绝将使用非零退出代码终止Node.js进程。</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-token-function)">.on</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;unhandledRejection&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> err </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-keyword)">throw</span><span style="color:var(--shiki-color-text)"> err;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">});</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">spawn</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;react-dev-utils/crossSpawn&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">args</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-token-function)">.</span><span style="color:var(--shiki-token-constant)">argv</span><span style="color:var(--shiki-token-function)">.slice</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">2</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// 找到命令所在索引</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">scriptIndex</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">args</span><span style="color:var(--shiki-token-function)">.findIndex</span><span style="color:var(--shiki-color-text)">(</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  x </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> x </span><span style="color:var(--shiki-token-keyword)">===</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;build&#x27;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">||</span><span style="color:var(--shiki-color-text)"> x </span><span style="color:var(--shiki-token-keyword)">===</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;eject&#x27;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">||</span><span style="color:var(--shiki-color-text)"> x </span><span style="color:var(--shiki-token-keyword)">===</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;start&#x27;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">||</span><span style="color:var(--shiki-color-text)"> x </span><span style="color:var(--shiki-token-keyword)">===</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;test&#x27;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">script</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> scriptIndex </span><span style="color:var(--shiki-token-keyword)">===</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">-</span><span style="color:var(--shiki-token-constant)">1</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">?</span><span style="color:var(--shiki-color-text)"> args[</span><span style="color:var(--shiki-token-constant)">0</span><span style="color:var(--shiki-color-text)">] </span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> args[scriptIndex];</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">nodeArgs</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> scriptIndex </span><span style="color:var(--shiki-token-keyword)">&gt;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">0</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">?</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">args</span><span style="color:var(--shiki-token-function)">.slice</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">0</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> scriptIndex) </span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [];</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">if</span><span style="color:var(--shiki-color-text)"> ([</span><span style="color:var(--shiki-token-string-expression)">&#x27;build&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;eject&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;start&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;test&#x27;</span><span style="color:var(--shiki-color-text)">]</span><span style="color:var(--shiki-token-function)">.includes</span><span style="color:var(--shiki-color-text)">(script)) {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">result</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">spawn</span><span style="color:var(--shiki-token-function)">.sync</span><span style="color:var(--shiki-color-text)">(</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-color-text)">.execPath</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    nodeArgs</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-function)">.concat</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">require</span><span style="color:var(--shiki-token-function)">.resolve</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;../scripts/&#x27;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">+</span><span style="color:var(--shiki-color-text)"> script))</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-function)">.concat</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">args</span><span style="color:var(--shiki-token-function)">.slice</span><span style="color:var(--shiki-color-text)">(scriptIndex </span><span style="color:var(--shiki-token-keyword)">+</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">1</span><span style="color:var(--shiki-color-text)">))</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    { stdio</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;inherit&#x27;</span><span style="color:var(--shiki-color-text)"> }</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  );</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-keyword)">if</span><span style="color:var(--shiki-color-text)"> (</span><span style="color:var(--shiki-token-constant)">result</span><span style="color:var(--shiki-color-text)">.signal) {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">if</span><span style="color:var(--shiki-color-text)"> (</span><span style="color:var(--shiki-token-constant)">result</span><span style="color:var(--shiki-color-text)">.signal </span><span style="color:var(--shiki-token-keyword)">===</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;SIGKILL&#x27;</span><span style="color:var(--shiki-color-text)">) {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-string-expression)">&#x27;The build failed because the process exited too early. &#x27;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">+</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">          </span><span style="color:var(--shiki-token-string-expression)">&#x27;This probably means the system ran out of memory or someone called &#x27;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">+</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">          </span><span style="color:var(--shiki-token-string-expression)">&#x27;`kill -9` on the process.&#x27;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      );</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    } </span><span style="color:var(--shiki-token-keyword)">else</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">if</span><span style="color:var(--shiki-color-text)"> (</span><span style="color:var(--shiki-token-constant)">result</span><span style="color:var(--shiki-color-text)">.signal </span><span style="color:var(--shiki-token-keyword)">===</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;SIGTERM&#x27;</span><span style="color:var(--shiki-color-text)">) {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-string-expression)">&#x27;The build failed because the process exited too early. &#x27;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">+</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">          </span><span style="color:var(--shiki-token-string-expression)">&#x27;Someone might have called `kill` or `killall`, or the system could &#x27;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">+</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">          </span><span style="color:var(--shiki-token-string-expression)">&#x27;be shutting down.&#x27;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      );</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    }</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-token-function)">.exit</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">1</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  }</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-token-function)">.exit</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">result</span><span style="color:var(--shiki-color-text)">.status);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">} </span><span style="color:var(--shiki-token-keyword)">else</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;Unknown script &quot;&#x27;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">+</span><span style="color:var(--shiki-color-text)"> script </span><span style="color:var(--shiki-token-keyword)">+</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;&quot;.&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;Perhaps you need to update react-scripts?&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-string-expression)">&#x27;See: https://facebook.github.io/create-react-app/docs/updating-to-new-releases&#x27;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  );</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">}</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<h3 id="buildjs-1" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#buildjs-1">#</a>build.js</h3>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-js" meta=""><span class="line line-number"><span style="color:var(--shiki-token-string-expression)">&#x27;use strict&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// 设置为生产环境</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">env</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">BABEL_ENV</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;production&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">env</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">NODE_ENV</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;production&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// 未处理抛异常</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-token-function)">.on</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;unhandledRejection&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> err </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-keyword)">throw</span><span style="color:var(--shiki-color-text)"> err;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">});</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// 这里用到了env源码在下面.</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;../config/env&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">path</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;path&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">chalk</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;react-dev-utils/chalk&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">fs</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;fs-extra&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">bfj</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;bfj&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">webpack</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;webpack&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">configFactory</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;../config/webpack.config&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;../config/paths&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">checkRequiredFiles</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;react-dev-utils/checkRequiredFiles&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">formatWebpackMessages</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;react-dev-utils/formatWebpackMessages&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">printHostingInstructions</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;react-dev-utils/printHostingInstructions&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">FileSizeReporter</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;react-dev-utils/FileSizeReporter&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">printBuildError</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;react-dev-utils/printBuildError&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// 文件打包后 文件大小的一个打印器 在npm run build后会显示大小</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">measureFileSizesBeforeBuild</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-constant)">FileSizeReporter</span><span style="color:var(--shiki-color-text)">.measureFileSizesBeforeBuild;</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">printFileSizesAfterBuild</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">FileSizeReporter</span><span style="color:var(--shiki-color-text)">.printFileSizesAfterBuild;</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">useYarn</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">fs</span><span style="color:var(--shiki-token-function)">.existsSync</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.yarnLockFile);</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// These sizes are pretty large. We&#x27;ll warn for bundles exceeding them.</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">WARN_AFTER_BUNDLE_GZIP_SIZE</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">512</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">*</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">1024</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">WARN_AFTER_CHUNK_GZIP_SIZE</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">1024</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">*</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">1024</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">isInteractive</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">stdout</span><span style="color:var(--shiki-color-text)">.isTTY;</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// 检测文件是否存在，不存在退出</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">if</span><span style="color:var(--shiki-color-text)"> (</span><span style="color:var(--shiki-token-keyword)">!</span><span style="color:var(--shiki-token-function)">checkRequiredFiles</span><span style="color:var(--shiki-color-text)">([</span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.appHtml</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.appIndexJs])) {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-token-function)">.exit</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">1</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">}</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">argv</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-token-function)">.</span><span style="color:var(--shiki-token-constant)">argv</span><span style="color:var(--shiki-token-function)">.slice</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">2</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">writeStatsJson</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">argv</span><span style="color:var(--shiki-token-function)">.indexOf</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;--stats&#x27;</span><span style="color:var(--shiki-color-text)">) </span><span style="color:var(--shiki-token-keyword)">!==</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">-</span><span style="color:var(--shiki-token-constant)">1</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// Generate configuration</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">config</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">configFactory</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;production&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// We require that you explicitly set browsers and do not fall back to</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// browserslist defaults.</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// 检查浏览器的配置文件</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> { </span><span style="color:var(--shiki-token-constant)">checkBrowsers</span><span style="color:var(--shiki-color-text)"> } </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;react-dev-utils/browsersHelper&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-function)">checkBrowsers</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.appPath</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> isInteractive)</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-function)">.then</span><span style="color:var(--shiki-color-text)">(() </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">return</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">measureFileSizesBeforeBuild</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.appBuild);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  })</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-function)">.then</span><span style="color:var(--shiki-color-text)">(previousFileSizes </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-comment)">// 清空build目录</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-constant)">fs</span><span style="color:var(--shiki-token-function)">.emptyDirSync</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.appBuild);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-comment)">// 拷贝</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-function)">copyPublicFolder</span><span style="color:var(--shiki-color-text)">();</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-comment)">// 开启打包build函数</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">return</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">build</span><span style="color:var(--shiki-color-text)">(previousFileSizes);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  })</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-function)">.then</span><span style="color:var(--shiki-color-text)">(</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    ({ stats</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> previousFileSizes</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> warnings }) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-keyword)">if</span><span style="color:var(--shiki-color-text)"> (</span><span style="color:var(--shiki-token-constant)">warnings</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">length</span><span style="color:var(--shiki-color-text)">) {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">chalk</span><span style="color:var(--shiki-token-function)">.yellow</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;Compiled with warnings.\n&#x27;</span><span style="color:var(--shiki-color-text)">));</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">warnings</span><span style="color:var(--shiki-token-function)">.join</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;\n\n&#x27;</span><span style="color:var(--shiki-color-text)">));</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">          </span><span style="color:var(--shiki-token-string-expression)">&#x27;\nSearch for the &#x27;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">+</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            </span><span style="color:var(--shiki-token-constant)">chalk</span><span style="color:var(--shiki-token-function)">.underline</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">chalk</span><span style="color:var(--shiki-token-function)">.yellow</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;keywords&#x27;</span><span style="color:var(--shiki-color-text)">)) </span><span style="color:var(--shiki-token-keyword)">+</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            </span><span style="color:var(--shiki-token-string-expression)">&#x27; to learn more about each warning.&#x27;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        );</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">          </span><span style="color:var(--shiki-token-string-expression)">&#x27;To ignore, add &#x27;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">+</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            </span><span style="color:var(--shiki-token-constant)">chalk</span><span style="color:var(--shiki-token-function)">.cyan</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;// eslint-disable-next-line&#x27;</span><span style="color:var(--shiki-color-text)">) </span><span style="color:var(--shiki-token-keyword)">+</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            </span><span style="color:var(--shiki-token-string-expression)">&#x27; to the line before.\n&#x27;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        );</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      } </span><span style="color:var(--shiki-token-keyword)">else</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">chalk</span><span style="color:var(--shiki-token-function)">.green</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;Compiled successfully.\n&#x27;</span><span style="color:var(--shiki-color-text)">));</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      }</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">	  </span><span style="color:var(--shiki-token-comment)">// 打印文件相关信息在build之后</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;File sizes after gzip:\n&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-function)">printFileSizesAfterBuild</span><span style="color:var(--shiki-color-text)">(</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        stats</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        previousFileSizes</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.appBuild</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-constant)">WARN_AFTER_BUNDLE_GZIP_SIZE</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-constant)">WARN_AFTER_CHUNK_GZIP_SIZE</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      );</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">();</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">appPackage</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.appPackageJson);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">publicUrl</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.publicUrlOrPath;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">publicPath</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">config</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">output</span><span style="color:var(--shiki-color-text)">.publicPath;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">buildFolder</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">path</span><span style="color:var(--shiki-token-function)">.relative</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-token-function)">.cwd</span><span style="color:var(--shiki-color-text)">()</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.appBuild);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-function)">printHostingInstructions</span><span style="color:var(--shiki-color-text)">(</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        appPackage</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        publicUrl</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        publicPath</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        buildFolder</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        useYarn</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      );</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    err </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">tscCompileOnError</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">env</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">TSC_COMPILE_ON_ERROR</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">===</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;true&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-keyword)">if</span><span style="color:var(--shiki-color-text)"> (tscCompileOnError) {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">          </span><span style="color:var(--shiki-token-constant)">chalk</span><span style="color:var(--shiki-token-function)">.yellow</span><span style="color:var(--shiki-color-text)">(</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            </span><span style="color:var(--shiki-token-string-expression)">&#x27;Compiled with the following type errors (you may want to check these before deploying your app):\n&#x27;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">          )</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        );</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-function)">printBuildError</span><span style="color:var(--shiki-color-text)">(err);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      } </span><span style="color:var(--shiki-token-keyword)">else</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">chalk</span><span style="color:var(--shiki-token-function)">.red</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;Failed to compile.\n&#x27;</span><span style="color:var(--shiki-color-text)">));</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-function)">printBuildError</span><span style="color:var(--shiki-color-text)">(err);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-token-function)">.exit</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">1</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      }</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    }</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  )</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-function)">.catch</span><span style="color:var(--shiki-color-text)">(err </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">if</span><span style="color:var(--shiki-color-text)"> (err </span><span style="color:var(--shiki-token-keyword)">&amp;&amp;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">err</span><span style="color:var(--shiki-color-text)">.message) {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">err</span><span style="color:var(--shiki-color-text)">.message);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    }</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-token-function)">.exit</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">1</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  });</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// 创建生产构建并打印说明</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">function</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">build</span><span style="color:var(--shiki-color-text)">(previousFileSizes) {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;Creating an optimized production build...&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">compiler</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">webpack</span><span style="color:var(--shiki-color-text)">(config);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-keyword)">return</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">new</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">Promise</span><span style="color:var(--shiki-color-text)">((resolve</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> reject) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-constant)">compiler</span><span style="color:var(--shiki-token-function)">.run</span><span style="color:var(--shiki-color-text)">((err</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> stats) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-keyword)">let</span><span style="color:var(--shiki-color-text)"> messages;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-keyword)">if</span><span style="color:var(--shiki-color-text)"> (err) {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-keyword)">if</span><span style="color:var(--shiki-color-text)"> (</span><span style="color:var(--shiki-token-keyword)">!</span><span style="color:var(--shiki-token-constant)">err</span><span style="color:var(--shiki-color-text)">.message) {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">          </span><span style="color:var(--shiki-token-keyword)">return</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">reject</span><span style="color:var(--shiki-color-text)">(err);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        }</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-keyword)">let</span><span style="color:var(--shiki-color-text)"> errMessage </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">err</span><span style="color:var(--shiki-color-text)">.message;</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-comment)">// Add additional information for postcss errors</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-keyword)">if</span><span style="color:var(--shiki-color-text)"> (</span><span style="color:var(--shiki-token-constant)">Object</span><span style="color:var(--shiki-token-function)">.</span><span style="color:var(--shiki-token-constant)">prototype</span><span style="color:var(--shiki-token-function)">.</span><span style="color:var(--shiki-token-constant)">hasOwnProperty</span><span style="color:var(--shiki-token-function)">.call</span><span style="color:var(--shiki-color-text)">(err</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;postcssNode&#x27;</span><span style="color:var(--shiki-color-text)">)) {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">          errMessage </span><span style="color:var(--shiki-token-keyword)">+=</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            </span><span style="color:var(--shiki-token-string-expression)">&#x27;\nCompileError: Begins at CSS selector &#x27;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">+</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            err[</span><span style="color:var(--shiki-token-string-expression)">&#x27;postcssNode&#x27;</span><span style="color:var(--shiki-color-text)">].selector;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        }</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        messages </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">formatWebpackMessages</span><span style="color:var(--shiki-color-text)">({</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">          errors</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [errMessage]</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">          warnings</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> []</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        });</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      } </span><span style="color:var(--shiki-token-keyword)">else</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        messages </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">formatWebpackMessages</span><span style="color:var(--shiki-color-text)">(</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">          </span><span style="color:var(--shiki-token-constant)">stats</span><span style="color:var(--shiki-token-function)">.toJson</span><span style="color:var(--shiki-color-text)">({ all</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">false</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> warnings</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">true</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> errors</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">true</span><span style="color:var(--shiki-color-text)"> })</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        );</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      }</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-keyword)">if</span><span style="color:var(--shiki-color-text)"> (</span><span style="color:var(--shiki-token-constant)">messages</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">errors</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">length</span><span style="color:var(--shiki-color-text)">) {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-comment)">// Only keep the first error. Others are often indicative</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-comment)">// of the same problem, but confuse the reader with noise.</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-keyword)">if</span><span style="color:var(--shiki-color-text)"> (</span><span style="color:var(--shiki-token-constant)">messages</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">errors</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">length</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">&gt;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">1</span><span style="color:var(--shiki-color-text)">) {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">          </span><span style="color:var(--shiki-token-constant)">messages</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">errors</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">length</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">1</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        }</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-keyword)">return</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">reject</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-keyword)">new</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">Error</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">messages</span><span style="color:var(--shiki-token-function)">.</span><span style="color:var(--shiki-token-constant)">errors</span><span style="color:var(--shiki-token-function)">.join</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;\n\n&#x27;</span><span style="color:var(--shiki-color-text)">)));</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      }</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-keyword)">if</span><span style="color:var(--shiki-color-text)"> (</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">env</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">CI</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">&amp;&amp;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        (</span><span style="color:var(--shiki-token-keyword)">typeof</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">env</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">CI</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">!==</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;string&#x27;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">||</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">          </span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-token-function)">.</span><span style="color:var(--shiki-token-constant)">env</span><span style="color:var(--shiki-token-function)">.</span><span style="color:var(--shiki-token-constant)">CI</span><span style="color:var(--shiki-token-function)">.toLowerCase</span><span style="color:var(--shiki-color-text)">() </span><span style="color:var(--shiki-token-keyword)">!==</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;false&#x27;</span><span style="color:var(--shiki-color-text)">) </span><span style="color:var(--shiki-token-keyword)">&amp;&amp;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-constant)">messages</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">warnings</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">length</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      ) {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-comment)">// Ignore sourcemap warnings in CI builds. See #8227 for more info.</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">filteredWarnings</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">messages</span><span style="color:var(--shiki-token-function)">.</span><span style="color:var(--shiki-token-constant)">warnings</span><span style="color:var(--shiki-token-function)">.filter</span><span style="color:var(--shiki-color-text)">(</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">          w </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">!</span><span style="color:var(--shiki-token-string-expression)">/Failed to parse source map/</span><span style="color:var(--shiki-token-function)">.test</span><span style="color:var(--shiki-color-text)">(w)</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        );</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-keyword)">if</span><span style="color:var(--shiki-color-text)"> (</span><span style="color:var(--shiki-token-constant)">filteredWarnings</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">length</span><span style="color:var(--shiki-color-text)">) {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">          </span><span style="color:var(--shiki-token-constant)">console</span><span style="color:var(--shiki-token-function)">.log</span><span style="color:var(--shiki-color-text)">(</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            </span><span style="color:var(--shiki-token-constant)">chalk</span><span style="color:var(--shiki-token-function)">.yellow</span><span style="color:var(--shiki-color-text)">(</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">              </span><span style="color:var(--shiki-token-string-expression)">&#x27;\nTreating warnings as errors because process.env.CI = true.\n&#x27;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">+</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                </span><span style="color:var(--shiki-token-string-expression)">&#x27;Most CI servers set it automatically.\n&#x27;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            )</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">          );</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">          </span><span style="color:var(--shiki-token-keyword)">return</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">reject</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-keyword)">new</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">Error</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">filteredWarnings</span><span style="color:var(--shiki-token-function)">.join</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;\n\n&#x27;</span><span style="color:var(--shiki-color-text)">)));</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        }</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      }</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">resolveArgs</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        stats</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        previousFileSizes</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        warnings</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">messages</span><span style="color:var(--shiki-color-text)">.warnings</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      };</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-keyword)">if</span><span style="color:var(--shiki-color-text)"> (writeStatsJson) {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-keyword)">return</span><span style="color:var(--shiki-color-text)"> bfj</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">          </span><span style="color:var(--shiki-token-function)">.write</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.appBuild </span><span style="color:var(--shiki-token-keyword)">+</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;/bundle-stats.json&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">stats</span><span style="color:var(--shiki-token-function)">.toJson</span><span style="color:var(--shiki-color-text)">())</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">          </span><span style="color:var(--shiki-token-function)">.then</span><span style="color:var(--shiki-color-text)">(() </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">resolve</span><span style="color:var(--shiki-color-text)">(resolveArgs))</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">          </span><span style="color:var(--shiki-token-function)">.catch</span><span style="color:var(--shiki-color-text)">(error </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">reject</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-keyword)">new</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">Error</span><span style="color:var(--shiki-color-text)">(error)));</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      }</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-keyword)">return</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">resolve</span><span style="color:var(--shiki-color-text)">(resolveArgs);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    });</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  });</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">}</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">function</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">copyPublicFolder</span><span style="color:var(--shiki-color-text)">() {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-constant)">fs</span><span style="color:var(--shiki-token-function)">.copySync</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.appPublic</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.appBuild</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    dereference</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">true</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-function)">filter</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> file </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> file </span><span style="color:var(--shiki-token-keyword)">!==</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.appHtml</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  });</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">}</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<h3 id="envjs" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#envjs">#</a>env.js</h3>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-js" meta=""><span class="line line-number"><span style="color:var(--shiki-token-string-expression)">&#x27;use strict&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">fs</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;fs&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">path</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;path&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;./paths&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// 先删除paths，环境变量改完后paths可能变了</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">delete</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">require</span><span style="color:var(--shiki-color-text)">.cache[</span><span style="color:var(--shiki-token-constant)">require</span><span style="color:var(--shiki-token-function)">.resolve</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;./paths&#x27;</span><span style="color:var(--shiki-color-text)">)];</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">NODE_ENV</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">env</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">NODE_ENV</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">if</span><span style="color:var(--shiki-color-text)"> (</span><span style="color:var(--shiki-token-keyword)">!</span><span style="color:var(--shiki-token-constant)">NODE_ENV</span><span style="color:var(--shiki-color-text)">) {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-keyword)">throw</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">new</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">Error</span><span style="color:var(--shiki-color-text)">(</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-string-expression)">&#x27;The NODE_ENV environment variable is required but was not specified.&#x27;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  );</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">}</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">dotenvFiles</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> [</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-string-expression)">`</span><span style="color:var(--shiki-token-keyword)">${</span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.dotenv</span><span style="color:var(--shiki-token-keyword)">}</span><span style="color:var(--shiki-token-string-expression)">.</span><span style="color:var(--shiki-token-keyword)">${</span><span style="color:var(--shiki-token-constant)">NODE_ENV</span><span style="color:var(--shiki-token-keyword)">}</span><span style="color:var(--shiki-token-string-expression)">.local`</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-constant)">NODE_ENV</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">!==</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;test&#x27;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">&amp;&amp;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">`</span><span style="color:var(--shiki-token-keyword)">${</span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.dotenv</span><span style="color:var(--shiki-token-keyword)">}</span><span style="color:var(--shiki-token-string-expression)">.local`</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-string-expression)">`</span><span style="color:var(--shiki-token-keyword)">${</span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.dotenv</span><span style="color:var(--shiki-token-keyword)">}</span><span style="color:var(--shiki-token-string-expression)">.</span><span style="color:var(--shiki-token-keyword)">${</span><span style="color:var(--shiki-token-constant)">NODE_ENV</span><span style="color:var(--shiki-token-keyword)">}</span><span style="color:var(--shiki-token-string-expression)">`</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.dotenv</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">]</span><span style="color:var(--shiki-token-function)">.filter</span><span style="color:var(--shiki-color-text)">(Boolean);</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// 用来读取数据将其放入process.env中</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-constant)">dotenvFiles</span><span style="color:var(--shiki-token-function)">.forEach</span><span style="color:var(--shiki-color-text)">(dotenvFile </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-keyword)">if</span><span style="color:var(--shiki-color-text)"> (</span><span style="color:var(--shiki-token-constant)">fs</span><span style="color:var(--shiki-token-function)">.existsSync</span><span style="color:var(--shiki-color-text)">(dotenvFile)) {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;dotenv-expand&#x27;</span><span style="color:var(--shiki-color-text)">)(</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-function)">require</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;dotenv&#x27;</span><span style="color:var(--shiki-color-text)">)</span><span style="color:var(--shiki-token-function)">.config</span><span style="color:var(--shiki-color-text)">({</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        path</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> dotenvFile</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      })</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    );</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  }</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">});</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// 我们支持根据`NODE_PATH`解析模块。</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// 这允许您在大型 monorepos 内的导入中使用绝对路径：</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// 它的工作方式类似于 Node 本身中的 `NODE_PATH`：</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// 请注意，与 Node 不同，仅考虑“NODE_PATH”中的“相对”路径。</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// 否则，我们将面临将 Node.js 核心模块而不是 webpack shim 导入到应用程序中的风险。</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// 我们还解决了这些问题，以确保使用它们的所有工具都能一致地工作。</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// NODE_PATH 是一个用来路径分隔符分开的路径目录的集合</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// 用来告诉我们去哪里查找模块</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">appDirectory</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">fs</span><span style="color:var(--shiki-token-function)">.realpathSync</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-token-function)">.cwd</span><span style="color:var(--shiki-color-text)">());</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">env</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">NODE_PATH</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> (</span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">env</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">NODE_PATH</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">||</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;&#x27;</span><span style="color:var(--shiki-color-text)">)</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-function)">.split</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">path</span><span style="color:var(--shiki-color-text)">.delimiter) </span><span style="color:var(--shiki-token-comment)">// delimiter windows是分号; mac是冒号:</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-function)">.filter</span><span style="color:var(--shiki-color-text)">(folder </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> folder </span><span style="color:var(--shiki-token-keyword)">&amp;&amp;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">!</span><span style="color:var(--shiki-token-constant)">path</span><span style="color:var(--shiki-token-function)">.isAbsolute</span><span style="color:var(--shiki-color-text)">(folder))</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-function)">.map</span><span style="color:var(--shiki-color-text)">(folder </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">path</span><span style="color:var(--shiki-token-function)">.resolve</span><span style="color:var(--shiki-color-text)">(appDirectory</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> folder))</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-function)">.join</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">path</span><span style="color:var(--shiki-color-text)">.delimiter);</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// Grab NODE_ENV and REACT_APP_* environment variables and prepare them to be</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// injected into the application via DefinePlugin in webpack configuration.</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// 获取环境变量</span></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">REACT_APP</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-token-string-expression)"> /</span><span style="color:var(--shiki-token-keyword)">^</span><span style="color:var(--shiki-token-string-expression)">REACT_APP_/</span><span style="color:var(--shiki-token-keyword)">i</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-token-keyword)">function</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">getClientEnvironment</span><span style="color:var(--shiki-color-text)">(publicUrl) {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">raw</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">Object</span><span style="color:var(--shiki-token-function)">.keys</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-color-text)">.env)</span><span style="color:var(--shiki-token-comment)">// 通过正则过滤</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-function)">.filter</span><span style="color:var(--shiki-color-text)">(key </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">REACT_APP</span><span style="color:var(--shiki-token-function)">.test</span><span style="color:var(--shiki-color-text)">(key))</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-function)">.reduce</span><span style="color:var(--shiki-color-text)">(</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      (env</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> key) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        env[key] </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-color-text)">.env[key];</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-keyword)">return</span><span style="color:var(--shiki-color-text)"> env;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-comment)">// 用于确定我们是否在生产模式下运行。</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-comment)">// 最重要的是，它将 React 切换到正确的模式。</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        NODE_ENV</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">env</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">NODE_ENV</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">||</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;development&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-comment)">// 对于解析“public”中静态资源的正确路径很有用。</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-comment)">// 例如，&lt;img src={process.env.PUBLIC_URL + &#x27;/img/logo.png&#x27;} /&gt;。</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-comment)">// 将图像放入`src`并在代码中`import`它们以获取它们的路径。</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        PUBLIC_URL</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> publicUrl</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-comment)">// 资源访问路径的前缀</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-comment)">// 我们支持在开发过程中配置sockjs路径名。</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-comment)">// 这些设置允许开发人员同时运行多个项目。</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-comment)">// 它们用作连接“主机名”、“路径名”和“端口”</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-comment)">// 在 webpackHotDevClient 中。 它们被用作 `sockHost`, `sockPath`</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-comment)">// 和 webpack-dev-server 中的 `sockPort` 选项。</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-comment)">// 热更新的时候用，像指热更新主机</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        WDS_SOCKET_HOST</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">env</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">WDS_SOCKET_HOST</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        WDS_SOCKET_PATH</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">env</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">WDS_SOCKET_PATH</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        WDS_SOCKET_PORT</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">env</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">WDS_SOCKET_PORT</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-comment)">// 是否启用react-refresh。</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        </span><span style="color:var(--shiki-token-comment)">// 它在这里定义，因此可以在 webpackHotDevClient 中使用。</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        FAST_REFRESH</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">env</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">FAST_REFRESH</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">!==</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;false&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      }</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    );</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-comment)">// 将所有值序列化，以便我们可以将其输入到 webpack DefinePlugin 中</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">stringified</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-string-expression)">&#x27;process.env&#x27;</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">Object</span><span style="color:var(--shiki-token-function)">.keys</span><span style="color:var(--shiki-color-text)">(raw)</span><span style="color:var(--shiki-token-function)">.reduce</span><span style="color:var(--shiki-color-text)">((env</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> key) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      env[key] </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">JSON</span><span style="color:var(--shiki-token-function)">.stringify</span><span style="color:var(--shiki-color-text)">(raw[key]);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">      </span><span style="color:var(--shiki-token-keyword)">return</span><span style="color:var(--shiki-color-text)"> env;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    }</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> {})</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  };</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">  </span><span style="color:var(--shiki-token-keyword)">return</span><span style="color:var(--shiki-color-text)"> { raw</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> stringified };</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">}</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-token-constant)">module</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">exports</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> getClientEnvironment;</span></span>
<span class="line line-number"></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div>
<h3 id="webpackconfigjs" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#webpackconfigjs">#</a>webpack.config.js</h3>
<p class="my-4 leading-7">展现部分代码，源代码配置等过多</p>
<div class="shiki css-variables has-line-number"><div class="rspress-code-content rspress-scrollbar"><div class="language-js"><div class="rspress-code-content rspress-scrollbar"><div><code class="language-js" meta=""><span class="line line-number"><span style="color:var(--shiki-token-string-expression)">&#x27;use strict&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-token-comment)">// 一些引入代码过多就不写在这了</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-token-constant)">module</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">exports</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">function</span><span style="color:var(--shiki-color-text)"> (webpackEnv) {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-comment)">// 和我们写的一样获取环境</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">isEnvDevelopment</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> webpackEnv </span><span style="color:var(--shiki-token-keyword)">===</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;development&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">isEnvProduction</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> webpackEnv </span><span style="color:var(--shiki-token-keyword)">===</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;production&#x27;</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">isEnvProductionProfile</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        isEnvProduction </span><span style="color:var(--shiki-token-keyword)">&amp;&amp;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">process</span><span style="color:var(--shiki-token-function)">.</span><span style="color:var(--shiki-token-constant)">argv</span><span style="color:var(--shiki-token-function)">.includes</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;--profile&#x27;</span><span style="color:var(--shiki-color-text)">);</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">env</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">getClientEnvironment</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-token-function)">.</span><span style="color:var(--shiki-token-constant)">publicUrlOrPath</span><span style="color:var(--shiki-token-function)">.slice</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">0</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">-</span><span style="color:var(--shiki-token-constant)">1</span><span style="color:var(--shiki-color-text)">));</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">shouldUseReactRefresh</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">env</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">raw</span><span style="color:var(--shiki-color-text)">.</span><span style="color:var(--shiki-token-constant)">FAST_REFRESH</span><span style="color:var(--shiki-color-text)">;</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    </span><span style="color:var(--shiki-token-keyword)">return</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        target</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [</span><span style="color:var(--shiki-token-string-expression)">&#x27;browserslist&#x27;</span><span style="color:var(--shiki-color-text)">]</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        stats</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;errors-warnings&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        mode</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> isEnvProduction </span><span style="color:var(--shiki-token-keyword)">?</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;production&#x27;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> isEnvDevelopment </span><span style="color:var(--shiki-token-keyword)">&amp;&amp;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;development&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        bail</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> isEnvProduction</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        devtool</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> isEnvProduction</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            </span><span style="color:var(--shiki-token-keyword)">?</span><span style="color:var(--shiki-color-text)"> shouldUseSourceMap</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                </span><span style="color:var(--shiki-token-keyword)">?</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;source-map&#x27;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                </span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">false</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            </span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> isEnvDevelopment </span><span style="color:var(--shiki-token-keyword)">&amp;&amp;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;cheap-module-source-map&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        entry</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.appIndexJs</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        output</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            path</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.appBuild</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            pathinfo</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> isEnvDevelopment</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            filename</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> isEnvProduction</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                </span><span style="color:var(--shiki-token-keyword)">?</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;static/js/[name].[contenthash:8].js&#x27;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                </span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> isEnvDevelopment </span><span style="color:var(--shiki-token-keyword)">&amp;&amp;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;static/js/bundle.js&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            chunkFilename</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> isEnvProduction</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                </span><span style="color:var(--shiki-token-keyword)">?</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;static/js/[name].[contenthash:8].chunk.js&#x27;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                </span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> isEnvDevelopment </span><span style="color:var(--shiki-token-keyword)">&amp;&amp;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;static/js/[name].chunk.js&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            assetModuleFilename</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;static/media/[name].[hash][ext]&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            publicPath</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.publicUrlOrPath</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            devtoolModuleFilenameTemplate</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> isEnvProduction</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                </span><span style="color:var(--shiki-token-keyword)">?</span><span style="color:var(--shiki-color-text)"> info </span><span style="color:var(--shiki-token-keyword)">=&gt;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    path</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        </span><span style="color:var(--shiki-token-function)">.relative</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.appSrc</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">info</span><span style="color:var(--shiki-color-text)">.absoluteResourcePath)</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        </span><span style="color:var(--shiki-token-function)">.replace</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">/\\/</span><span style="color:var(--shiki-token-keyword)">g</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;/&#x27;</span><span style="color:var(--shiki-color-text)">)</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                </span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> isEnvDevelopment </span><span style="color:var(--shiki-token-keyword)">&amp;&amp;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                (info </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">path</span><span style="color:var(--shiki-token-function)">.resolve</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">info</span><span style="color:var(--shiki-color-text)">.absoluteResourcePath)</span><span style="color:var(--shiki-token-function)">.replace</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">/\\/</span><span style="color:var(--shiki-token-keyword)">g</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;/&#x27;</span><span style="color:var(--shiki-color-text)">))</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        cache</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            type</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;filesystem&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            version</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">createEnvironmentHash</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">env</span><span style="color:var(--shiki-color-text)">.raw)</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            cacheDirectory</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.appWebpackCache</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            store</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;pack&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            buildDependencies</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                defaultWebpack</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [</span><span style="color:var(--shiki-token-string-expression)">&#x27;webpack/lib/&#x27;</span><span style="color:var(--shiki-color-text)">]</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                config</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [__filename]</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                tsconfig</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [</span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.appTsConfig</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.appJsConfig]</span><span style="color:var(--shiki-token-function)">.filter</span><span style="color:var(--shiki-color-text)">(f </span><span style="color:var(--shiki-token-keyword)">=&gt;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    </span><span style="color:var(--shiki-token-constant)">fs</span><span style="color:var(--shiki-token-function)">.existsSync</span><span style="color:var(--shiki-color-text)">(f)</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                )</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        infrastructureLogging</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            level</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;none&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        optimization</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            minimize</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> isEnvProduction</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            minimizer</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                </span><span style="color:var(--shiki-token-keyword)">new</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">TerserPlugin</span><span style="color:var(--shiki-color-text)">({</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    terserOptions</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        parse</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> {</span><span style="color:var(--shiki-token-comment)">// 解析选项</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            ecma</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">8</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        compress</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            ecma</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">5</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            warnings</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">false</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            comparisons</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">false</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            inline</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">2</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        mangle</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            safari10</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">true</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        }</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-comment)">// 保持类名</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        keep_classnames</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> isEnvProductionProfile</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        keep_fnames</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> isEnvProductionProfile</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        output</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            ecma</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">5</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            comments</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">false</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            </span><span style="color:var(--shiki-token-comment)">// 不设为true的话emoji和regex无法正常压缩</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            ascii_only</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">true</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                })</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                </span><span style="color:var(--shiki-token-comment)">// Css</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                </span><span style="color:var(--shiki-token-keyword)">new</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">CssMinimizerPlugin</span><span style="color:var(--shiki-color-text)">()</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            ]</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        resolve</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            </span><span style="color:var(--shiki-token-comment)">// 去哪个目录找我们的模块</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            modules</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [</span><span style="color:var(--shiki-token-string-expression)">&#x27;node_modules&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.appNodeModules]</span><span style="color:var(--shiki-token-function)">.concat</span><span style="color:var(--shiki-color-text)">(</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                </span><span style="color:var(--shiki-token-constant)">modules</span><span style="color:var(--shiki-color-text)">.additionalModulePaths </span><span style="color:var(--shiki-token-keyword)">||</span><span style="color:var(--shiki-color-text)"> []</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            )</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            extensions</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.moduleFileExtensions</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                </span><span style="color:var(--shiki-token-function)">.map</span><span style="color:var(--shiki-color-text)">(ext </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">`.</span><span style="color:var(--shiki-token-keyword)">${</span><span style="color:var(--shiki-color-text)">ext</span><span style="color:var(--shiki-token-keyword)">}</span><span style="color:var(--shiki-token-string-expression)">`</span><span style="color:var(--shiki-color-text)">)</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                </span><span style="color:var(--shiki-token-function)">.filter</span><span style="color:var(--shiki-color-text)">(ext </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> useTypeScript </span><span style="color:var(--shiki-token-keyword)">||</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">!</span><span style="color:var(--shiki-token-constant)">ext</span><span style="color:var(--shiki-token-function)">.includes</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;ts&#x27;</span><span style="color:var(--shiki-color-text)">))</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            alias</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                </span><span style="color:var(--shiki-token-string-expression)">&#x27;react-native&#x27;</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;react-native-web&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                </span><span style="color:var(--shiki-token-comment)">// Allows for better profiling with ReactDevTools</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                </span><span style="color:var(--shiki-token-keyword)">...</span><span style="color:var(--shiki-color-text)">(isEnvProductionProfile </span><span style="color:var(--shiki-token-keyword)">&amp;&amp;</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    </span><span style="color:var(--shiki-token-string-expression)">&#x27;react-dom$&#x27;</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;react-dom/profiling&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    </span><span style="color:var(--shiki-token-string-expression)">&#x27;scheduler/tracing&#x27;</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;scheduler/tracing-profiling&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                })</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                </span><span style="color:var(--shiki-token-keyword)">...</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">modules</span><span style="color:var(--shiki-color-text)">.webpackAliases </span><span style="color:var(--shiki-token-keyword)">||</span><span style="color:var(--shiki-color-text)"> {})</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            plugins</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                </span><span style="color:var(--shiki-token-keyword)">new</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">ModuleScopePlugin</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.appSrc</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> [</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    </span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.appPackageJson</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    reactRefreshRuntimeEntry</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    reactRefreshWebpackPluginRuntimeEntry</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    babelRuntimeEntry</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    babelRuntimeEntryHelpers</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    babelRuntimeRegenerator</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                ])</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            ]</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        module</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            </span><span style="color:var(--shiki-token-comment)">// 严格导出模块</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            strictExportPresence</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">true</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            rules</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                </span><span style="color:var(--shiki-token-comment)">// Handle node_modules packages that contain sourcemaps</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                shouldUseSourceMap </span><span style="color:var(--shiki-token-keyword)">&amp;&amp;</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    enforce</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;pre&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    exclude</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-string-expression)"> /@babel(?:\/</span><span style="color:var(--shiki-token-keyword)">|</span><span style="color:var(--shiki-token-string-expression)">\\</span><span style="color:var(--shiki-token-keyword)">{1,2}</span><span style="color:var(--shiki-token-string-expression)">)runtime/</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    test</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-string-expression)"> /\.(js</span><span style="color:var(--shiki-token-keyword)">|</span><span style="color:var(--shiki-token-string-expression)">mjs</span><span style="color:var(--shiki-token-keyword)">|</span><span style="color:var(--shiki-token-string-expression)">jsx</span><span style="color:var(--shiki-token-keyword)">|</span><span style="color:var(--shiki-token-string-expression)">ts</span><span style="color:var(--shiki-token-keyword)">|</span><span style="color:var(--shiki-token-string-expression)">tsx</span><span style="color:var(--shiki-token-keyword)">|</span><span style="color:var(--shiki-token-string-expression)">css)</span><span style="color:var(--shiki-token-keyword)">$</span><span style="color:var(--shiki-token-string-expression)">/</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    loader</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">require</span><span style="color:var(--shiki-token-function)">.resolve</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;source-map-loader&#x27;</span><span style="color:var(--shiki-color-text)">)</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    oneOf</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            test</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [</span><span style="color:var(--shiki-token-string-expression)">/\.avif</span><span style="color:var(--shiki-token-keyword)">$</span><span style="color:var(--shiki-token-string-expression)">/</span><span style="color:var(--shiki-color-text)">]</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            type</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;asset&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            mimetype</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;image/avif&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            parser</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                dataUrlCondition</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                    maxSize</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> imageInlineSizeLimit</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            test</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [</span><span style="color:var(--shiki-token-string-expression)">/\.bmp</span><span style="color:var(--shiki-token-keyword)">$</span><span style="color:var(--shiki-token-string-expression)">/</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-string-expression)"> /\.gif</span><span style="color:var(--shiki-token-keyword)">$</span><span style="color:var(--shiki-token-string-expression)">/</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-string-expression)"> /\.jpe</span><span style="color:var(--shiki-token-keyword)">?</span><span style="color:var(--shiki-token-string-expression)">g</span><span style="color:var(--shiki-token-keyword)">$</span><span style="color:var(--shiki-token-string-expression)">/</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-string-expression)"> /\.png</span><span style="color:var(--shiki-token-keyword)">$</span><span style="color:var(--shiki-token-string-expression)">/</span><span style="color:var(--shiki-color-text)">]</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            type</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;asset&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            parser</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                dataUrlCondition</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                    maxSize</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> imageInlineSizeLimit</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            test</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-string-expression)"> /\.(js</span><span style="color:var(--shiki-token-keyword)">|</span><span style="color:var(--shiki-token-string-expression)">mjs</span><span style="color:var(--shiki-token-keyword)">|</span><span style="color:var(--shiki-token-string-expression)">jsx</span><span style="color:var(--shiki-token-keyword)">|</span><span style="color:var(--shiki-token-string-expression)">ts</span><span style="color:var(--shiki-token-keyword)">|</span><span style="color:var(--shiki-token-string-expression)">tsx)</span><span style="color:var(--shiki-token-keyword)">$</span><span style="color:var(--shiki-token-string-expression)">/</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            include</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.appSrc</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            loader</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">require</span><span style="color:var(--shiki-token-function)">.resolve</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;babel-loader&#x27;</span><span style="color:var(--shiki-color-text)">)</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            options</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> { </span><span style="color:var(--shiki-token-comment)">//babel macro</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                customize</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">require</span><span style="color:var(--shiki-token-function)">.resolve</span><span style="color:var(--shiki-color-text)">(</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                    </span><span style="color:var(--shiki-token-string-expression)">&#x27;babel-preset-react-app/webpack-overrides&#x27;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                )</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                presets</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                    [</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                        </span><span style="color:var(--shiki-token-constant)">require</span><span style="color:var(--shiki-token-function)">.resolve</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;babel-preset-react-app&#x27;</span><span style="color:var(--shiki-color-text)">)</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                        </span><span style="color:var(--shiki-token-comment)">// react17 jsx转换规则变了</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                        </span><span style="color:var(--shiki-token-comment)">// 以前：&lt;div&gt;&lt;/div&gt; React.createElement(&#x27;div&#x27;);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                        </span><span style="color:var(--shiki-token-comment)">// 现在：如下</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                        {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                            runtime</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> hasJsxRuntime </span><span style="color:var(--shiki-token-keyword)">?</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;automatic&#x27;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;classic&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                        }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                    ]</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                ]</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                </span><span style="color:var(--shiki-token-comment)">// @remove-on-eject-begin</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                babelrc</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">false</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                configFile</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">false</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                cacheIdentifier</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">getCacheIdentifier</span><span style="color:var(--shiki-color-text)">(</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                    </span><span style="color:var(--shiki-token-comment)">// 把包名+版本号拼起来成一个标识符</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                    isEnvProduction</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                        </span><span style="color:var(--shiki-token-keyword)">?</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;production&#x27;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                        </span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> isEnvDevelopment </span><span style="color:var(--shiki-token-keyword)">&amp;&amp;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;development&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                    [</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                        </span><span style="color:var(--shiki-token-string-expression)">&#x27;babel-plugin-named-asset-import&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                        </span><span style="color:var(--shiki-token-string-expression)">&#x27;babel-preset-react-app&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                        </span><span style="color:var(--shiki-token-string-expression)">&#x27;react-dev-utils&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                        </span><span style="color:var(--shiki-token-string-expression)">&#x27;react-scripts&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                    ]</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                )</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                </span><span style="color:var(--shiki-token-comment)">// @remove-on-eject-end</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                plugins</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                    isEnvDevelopment </span><span style="color:var(--shiki-token-keyword)">&amp;&amp;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                    shouldUseReactRefresh </span><span style="color:var(--shiki-token-keyword)">&amp;&amp;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                    </span><span style="color:var(--shiki-token-constant)">require</span><span style="color:var(--shiki-token-function)">.resolve</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;react-refresh/babel&#x27;</span><span style="color:var(--shiki-color-text)">)</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                ]</span><span style="color:var(--shiki-token-function)">.filter</span><span style="color:var(--shiki-color-text)">(Boolean)</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                cacheDirectory</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">true</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-comment)">//给webpack做磁盘缓存</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                cacheCompression</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">false</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                compact</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> isEnvProduction</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        </span><span style="color:var(--shiki-token-comment)">// Process any JS outside of the app with Babel.</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        </span><span style="color:var(--shiki-token-comment)">// Unlike the application JS, we only compile the standard ES features.</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            test</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-string-expression)"> /\.(js</span><span style="color:var(--shiki-token-keyword)">|</span><span style="color:var(--shiki-token-string-expression)">mjs)</span><span style="color:var(--shiki-token-keyword)">$</span><span style="color:var(--shiki-token-string-expression)">/</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            exclude</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-string-expression)"> /@babel(?:\/</span><span style="color:var(--shiki-token-keyword)">|</span><span style="color:var(--shiki-token-string-expression)">\\</span><span style="color:var(--shiki-token-keyword)">{1,2}</span><span style="color:var(--shiki-token-string-expression)">)runtime/</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            loader</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">require</span><span style="color:var(--shiki-token-function)">.resolve</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;babel-loader&#x27;</span><span style="color:var(--shiki-color-text)">)</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            options</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                babelrc</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">false</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                configFile</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">false</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                compact</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">false</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                presets</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                    [</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                        </span><span style="color:var(--shiki-token-constant)">require</span><span style="color:var(--shiki-token-function)">.resolve</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;babel-preset-react-app/dependencies&#x27;</span><span style="color:var(--shiki-color-text)">)</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                        { helpers</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">true</span><span style="color:var(--shiki-color-text)"> }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                    ]</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                ]</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                cacheDirectory</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">true</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                cacheCompression</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">false</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                </span><span style="color:var(--shiki-token-comment)">// @remove-on-eject-begin</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                cacheIdentifier</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">getCacheIdentifier</span><span style="color:var(--shiki-color-text)">(</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                    isEnvProduction</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                        </span><span style="color:var(--shiki-token-keyword)">?</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;production&#x27;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                        </span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> isEnvDevelopment </span><span style="color:var(--shiki-token-keyword)">&amp;&amp;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;development&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                    [</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                        </span><span style="color:var(--shiki-token-string-expression)">&#x27;babel-plugin-named-asset-import&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                        </span><span style="color:var(--shiki-token-string-expression)">&#x27;babel-preset-react-app&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                        </span><span style="color:var(--shiki-token-string-expression)">&#x27;react-dev-utils&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                        </span><span style="color:var(--shiki-token-string-expression)">&#x27;react-scripts&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                    ]</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                )</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                </span><span style="color:var(--shiki-token-comment)">// @remove-on-eject-end</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                sourceMaps</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> shouldUseSourceMap</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                inputSourceMap</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> shouldUseSourceMap</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        {</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            exclude</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [</span><span style="color:var(--shiki-token-string-expression)">/</span><span style="color:var(--shiki-token-keyword)">^$</span><span style="color:var(--shiki-token-string-expression)">/</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-string-expression)"> /\.(js</span><span style="color:var(--shiki-token-keyword)">|</span><span style="color:var(--shiki-token-string-expression)">mjs</span><span style="color:var(--shiki-token-keyword)">|</span><span style="color:var(--shiki-token-string-expression)">jsx</span><span style="color:var(--shiki-token-keyword)">|</span><span style="color:var(--shiki-token-string-expression)">ts</span><span style="color:var(--shiki-token-keyword)">|</span><span style="color:var(--shiki-token-string-expression)">tsx)</span><span style="color:var(--shiki-token-keyword)">$</span><span style="color:var(--shiki-token-string-expression)">/</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-string-expression)"> /\.html</span><span style="color:var(--shiki-token-keyword)">$</span><span style="color:var(--shiki-token-string-expression)">/</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-string-expression)"> /\.json</span><span style="color:var(--shiki-token-keyword)">$</span><span style="color:var(--shiki-token-string-expression)">/</span><span style="color:var(--shiki-color-text)">]</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            type</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;asset/resource&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    ]</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            ]</span><span style="color:var(--shiki-token-function)">.filter</span><span style="color:var(--shiki-color-text)">(Boolean)</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        plugins</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            </span><span style="color:var(--shiki-token-keyword)">new</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">HtmlWebpackPlugin</span><span style="color:var(--shiki-color-text)">(</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                </span><span style="color:var(--shiki-token-constant)">Object</span><span style="color:var(--shiki-token-function)">.assign</span><span style="color:var(--shiki-color-text)">(</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    {}</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        inject</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">true</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        template</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.appHtml</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    isEnvProduction</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        </span><span style="color:var(--shiki-token-keyword)">?</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            minify</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                removeComments</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">true</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                collapseWhitespace</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">true</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                removeRedundantAttributes</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">true</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                useShortDoctype</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">true</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                removeEmptyAttributes</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">true</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                removeStyleLinkTypeAttributes</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">true</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                keepClosingSlash</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">true</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                minifyJS</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">true</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                minifyCSS</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">true</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                                minifyURLs</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">true</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                            }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        }</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        </span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">undefined</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                )</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            )</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            isEnvProduction </span><span style="color:var(--shiki-token-keyword)">&amp;&amp;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            shouldInlineRuntimeChunk </span><span style="color:var(--shiki-token-keyword)">&amp;&amp;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            </span><span style="color:var(--shiki-token-keyword)">new</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">InlineChunkHtmlPlugin</span><span style="color:var(--shiki-color-text)">(HtmlWebpackPlugin</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> [</span><span style="color:var(--shiki-token-string-expression)">/runtime-.</span><span style="color:var(--shiki-token-keyword)">+</span><span style="color:var(--shiki-token-string-expression)">[.]js/</span><span style="color:var(--shiki-color-text)">])</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            </span><span style="color:var(--shiki-token-keyword)">new</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">InterpolateHtmlPlugin</span><span style="color:var(--shiki-color-text)">(HtmlWebpackPlugin</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">env</span><span style="color:var(--shiki-color-text)">.raw)</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            </span><span style="color:var(--shiki-token-keyword)">new</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">ModuleNotFoundPlugin</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.appPath)</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            </span><span style="color:var(--shiki-token-keyword)">new</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">webpack</span><span style="color:var(--shiki-token-function)">.DefinePlugin</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-constant)">env</span><span style="color:var(--shiki-color-text)">.stringified)</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            isEnvDevelopment </span><span style="color:var(--shiki-token-keyword)">&amp;&amp;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            shouldUseReactRefresh </span><span style="color:var(--shiki-token-keyword)">&amp;&amp;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            </span><span style="color:var(--shiki-token-keyword)">new</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">ReactRefreshWebpackPlugin</span><span style="color:var(--shiki-color-text)">({</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                overlay</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">false</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            })</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            isEnvDevelopment </span><span style="color:var(--shiki-token-keyword)">&amp;&amp;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">new</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">CaseSensitivePathsPlugin</span><span style="color:var(--shiki-color-text)">()</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            isEnvProduction </span><span style="color:var(--shiki-token-keyword)">&amp;&amp;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            </span><span style="color:var(--shiki-token-keyword)">new</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">MiniCssExtractPlugin</span><span style="color:var(--shiki-color-text)">({</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                filename</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;static/css/[name].[contenthash:8].css&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                chunkFilename</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;static/css/[name].[contenthash:8].chunk.css&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            })</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            </span><span style="color:var(--shiki-token-keyword)">new</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-function)">WebpackManifestPlugin</span><span style="color:var(--shiki-color-text)">({</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                fileName</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-string-expression)">&#x27;asset-manifest.json&#x27;</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                publicPath</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">paths</span><span style="color:var(--shiki-color-text)">.publicUrlOrPath</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                </span><span style="color:var(--shiki-token-function)">generate</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> (seed</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> files</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> entrypoints) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    </span><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">manifestFiles</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">files</span><span style="color:var(--shiki-token-function)">.reduce</span><span style="color:var(--shiki-color-text)">((manifest</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> file) </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        manifest[</span><span style="color:var(--shiki-token-constant)">file</span><span style="color:var(--shiki-color-text)">.name] </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">file</span><span style="color:var(--shiki-color-text)">.path;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        </span><span style="color:var(--shiki-token-keyword)">return</span><span style="color:var(--shiki-color-text)"> manifest;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    }</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-color-text)"> seed);</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    </span><span style="color:var(--shiki-token-keyword)">const</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">entrypointFiles</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">=</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">entrypoints</span><span style="color:var(--shiki-token-function)">.</span><span style="color:var(--shiki-token-constant)">main</span><span style="color:var(--shiki-token-function)">.filter</span><span style="color:var(--shiki-color-text)">(</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        fileName </span><span style="color:var(--shiki-token-keyword)">=&gt;</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">!</span><span style="color:var(--shiki-token-constant)">fileName</span><span style="color:var(--shiki-token-function)">.endsWith</span><span style="color:var(--shiki-color-text)">(</span><span style="color:var(--shiki-token-string-expression)">&#x27;.map&#x27;</span><span style="color:var(--shiki-color-text)">)</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    );</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    </span><span style="color:var(--shiki-token-keyword)">return</span><span style="color:var(--shiki-color-text)"> {</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        files</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> manifestFiles</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                        entrypoints</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> entrypointFiles</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                    };</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                }</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            })</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            </span><span style="color:var(--shiki-token-keyword)">new</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">webpack</span><span style="color:var(--shiki-token-function)">.IgnorePlugin</span><span style="color:var(--shiki-color-text)">({</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                resourceRegExp</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-string-expression)"> /</span><span style="color:var(--shiki-token-keyword)">^</span><span style="color:var(--shiki-token-string-expression)">\.\/locale</span><span style="color:var(--shiki-token-keyword)">$</span><span style="color:var(--shiki-token-string-expression)">/</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                contextRegExp</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-string-expression)"> /moment</span><span style="color:var(--shiki-token-keyword)">$</span><span style="color:var(--shiki-token-string-expression)">/</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            })</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            isEnvProduction </span><span style="color:var(--shiki-token-keyword)">&amp;&amp;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            </span><span style="color:var(--shiki-token-constant)">fs</span><span style="color:var(--shiki-token-function)">.existsSync</span><span style="color:var(--shiki-color-text)">(swSrc) </span><span style="color:var(--shiki-token-keyword)">&amp;&amp;</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            </span><span style="color:var(--shiki-token-keyword)">new</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">WorkboxWebpackPlugin</span><span style="color:var(--shiki-token-function)">.InjectManifest</span><span style="color:var(--shiki-color-text)">({</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                swSrc</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                dontCacheBustURLsMatching</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-token-string-expression)"> /\.[0-9a-f]</span><span style="color:var(--shiki-token-keyword)">{8}</span><span style="color:var(--shiki-token-string-expression)">\./</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                exclude</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> [</span><span style="color:var(--shiki-token-string-expression)">/\.map</span><span style="color:var(--shiki-token-keyword)">$</span><span style="color:var(--shiki-token-string-expression)">/</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-string-expression)"> /asset-manifest\.json</span><span style="color:var(--shiki-token-keyword)">$</span><span style="color:var(--shiki-token-string-expression)">/</span><span style="color:var(--shiki-token-punctuation)">,</span><span style="color:var(--shiki-token-string-expression)"> /LICENSE/</span><span style="color:var(--shiki-color-text)">]</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">                maximumFileSizeToCacheInBytes</span><span style="color:var(--shiki-token-keyword)">:</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">5</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">*</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">1024</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-keyword)">*</span><span style="color:var(--shiki-color-text)"> </span><span style="color:var(--shiki-token-constant)">1024</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">            })</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">        performance: </span><span style="color:var(--shiki-token-constant)">false</span><span style="color:var(--shiki-token-punctuation)">,</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">    };</span></span>
<span class="line line-number"><span style="color:var(--shiki-color-text)">};</span></span>
</code></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrapped_15153"><path fill="#22a041" d="M21 5H3v2h18zM3 19h7v-2H3zm0-6h15c1 0 2 .43 2 2s-1 2-2 2h-2v-2l-4 3 4 3v-2h2c2.95 0 4-1.27 4-4 0-2.72-1-4-4-4H3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="icon-wrap_15153"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 30 30" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" viewBox="0 0 30 30" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div></div></div><!--/$--></div><div class="rspress-doc-footer"><footer class="mt-8"><div class="xs:flex pb-5 px-2 justify-end items-center"></div><div class="flex flex-col"></div><div class="flex flex-col sm:flex-row sm:justify-around gap-4 pt-6"><div class="prev_e7091 flex flex-col"><a class="link_03735 pager-link_9b9a7 cursor-pointer" target="" href="/handwriting/index.html"><span class="desc_9b9a7">Previous Page</span><span class="title_9b9a7">手写系列前言</span></a></div><div class="next_e7091 flex flex-col"></div></div></footer></div></div></div><div class="aside-container_edeb4"><div><div class="flex flex-col"><div class="&lt;lg:hidden"><div id="aside-container" class="relative text-sm font-medium"><div class="leading-7 block text-sm font-semibold pl-3">ON THIS PAGE</div><nav class="mt-1"><ul class="relative"><li><a href="#从零手写-create-react-app" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">从零手写 create-react-app</span></a></li><li><a href="#初始化" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">初始化</span></a></li><li><a href="#创建-package" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">创建 package</span></a></li><li><a href="#添加依赖" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">添加依赖</span></a></li><li><a href="#createreactappjs文件" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">createReactApp.js文件</span></a></li><li><a href="#init函数" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">init函数</span></a></li><li><a href="#createapp函数" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">createApp函数</span></a></li><li><a href="#run函数" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">run函数</span></a></li><li><a href="#install函数" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">install函数</span></a></li><li><a href="#executenodescript函数" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">executeNodeScript函数</span></a></li><li><a href="#手写react-scripts编译" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">手写react-scripts编译</span></a></li><li><a href="#react-scriptsjs" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">react-scripts.js</span></a></li><li><a href="#buildjs" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">build.js</span></a></li><li><a href="#start命令" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">start命令</span></a></li><li><a href="#源码解析" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">源码解析</span></a></li><li><a href="#react-scriptsjs源码" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">react-scripts.js源码</span></a></li><li><a href="#buildjs-1" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">build.js</span></a></li><li><a href="#envjs" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">env.js</span></a></li><li><a href="#webpackconfigjs" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">webpack.config.js</span></a></li></ul></nav></div></div></div></div></div></div></div></section></div></div><div id="search-container"></div></body></html>