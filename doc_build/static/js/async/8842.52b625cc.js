/*! For license information please see 8842.52b625cc.js.LICENSE.txt */
(self.webpackChunksurspress=self.webpackChunksurspress||[]).push([["8842"],{5177:function(s,e,n){"use strict";n.r(e);var r=n("11527"),l=n("65788");function i(s){let e=Object.assign({h2:"h2",a:"a",h3:"h3",p:"p",code:"code",pre:"pre",span:"span",ol:"ol",li:"li",h4:"h4",ul:"ul",img:"img"},(0,l.ah)(),s.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(e.h2,{id:"19-fs-\u4E0A",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#19-fs-\u4E0A",children:"#"}),"19-fs \u4E0A"]}),"\n",(0,r.jsxs)(e.h3,{id:"\u6982\u8FF0",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u6982\u8FF0",children:"#"}),"\u6982\u8FF0"]}),"\n",(0,r.jsxs)(e.p,{children:["\u5728 Node.js \u4E2D\uFF0C",(0,r.jsx)(e.code,{children:"fs"})," \u6A21\u5757\u662F\u6587\u4EF6\u7CFB\u7EDF\u6A21\u5757\uFF08File System module\uFF09\u7684\u7F29\u5199\uFF0C\u5B83\u63D0\u4F9B\u4E86\u4E0E\u6587\u4EF6\u7CFB\u7EDF\u8FDB\u884C\u4EA4\u4E92\u7684\u5404\u79CD\u529F\u80FD\u3002\u901A\u8FC7 ",(0,r.jsx)(e.code,{children:"fs"})," \u6A21\u5757\uFF0C\u4F60\u53EF\u4EE5\u6267\u884C\u8BF8\u5982\u8BFB\u53D6\u6587\u4EF6\u3001\u5199\u5165\u6587\u4EF6\u3001\u66F4\u6539\u6587\u4EF6\u6743\u9650\u3001\u521B\u5EFA\u76EE\u5F55\u7B49\u64CD\u4F5C\uFF0C",(0,r.jsx)(e.code,{children:"fs"}),"\u6A21\u5757\u662F",(0,r.jsx)(e.code,{children:"Node.js \u6838\u5FC3API\u4E4B\u4E00"}),"\u3002"]}),"\n",(0,r.jsxs)(e.h3,{id:"fs-\u591A\u79CD\u7B56\u7565",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#fs-\u591A\u79CD\u7B56\u7565",children:"#"}),"fs \u591A\u79CD\u7B56\u7565"]}),"\n",(0,r.jsx)(e.p,{children:"\u5982\u4E0B\u4EE3\u7801"}),"\n",(0,r.jsx)(e.pre,{className:"code",children:(0,r.jsx)(e.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(e.code,{className:"language-js",meta:"",children:[(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" fs "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'node:fs'"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" fs2 "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'node:fs/promises'"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(e.span,{className:"line line-number",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"//\u8BFB\u53D6\u6587\u4EF6"})}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"fs2"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".readFile"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./index.txt'"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:")"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".then"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"((result) "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"console"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".log"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"result"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".toString"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"());"})]}),"\n",(0,r.jsx)(e.span,{className:"line line-number",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"});"})}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"fs"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".readFile"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./index.txt'"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" (err"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" data) "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" (err) {"})]}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" err;"})]}),"\n",(0,r.jsx)(e.span,{className:"line line-number",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"console"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".log"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"data"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".toString"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"());"})]}),"\n",(0,r.jsx)(e.span,{className:"line line-number",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"});"})}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"let"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" txt "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"fs"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".readFileSync"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./index.txt'"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:");"})]}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"console"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".log"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"txt"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".toString"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"());"})]}),"\n"]})})}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["fs \u652F\u6301\u540C\u6B65\u548C\u5F02\u6B65\u4E24\u79CD\u6A21\u5F0F \uFF0C\u589E\u52A0\u4E86",(0,r.jsx)(e.code,{children:"Sync"})," fs \u5C31\u4F1A\u91C7\u7528\u540C\u6B65\u7684\u65B9\u5F0F\u8FD0\u884C\u4EE3\u7801\uFF0C\u4F1A\u963B\u585E\u4E0B\u9762\u7684\u4EE3\u7801\uFF0C\u4E0D\u52A0 Sync \u5C31\u662F\u5F02\u6B65\u7684\u6A21\u5F0F\u4E0D\u4F1A\u963B\u585E\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"fs \u65B0\u589E\u4E86 promise \u7248\u672C\uFF0C\u53EA\u9700\u8981\u5728\u5F15\u5165\u5305\u540E\u9762\u589E\u52A0/promises \u5373\u53EF\uFF0Cfs \u4FBF\u53EF\u652F\u6301 promise \u56DE\u8C03\u3002"}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"fs \u8FD4\u56DE\u7684\u662F\u4E00\u4E2A buffer \u4E8C\u8FDB\u5236\u6570\u636E \u6BCF\u4E24\u4E2A\u5341\u516D\u8FDB\u5236\u6570\u5B57\u8868\u793A\u4E00\u4E2A\u5B57\u8282"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"buffer \u5982\u4E0B:"}),"\n",(0,r.jsx)(e.pre,{className:"code",children:(0,r.jsx)(e.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(e.code,{className:"language-js",meta:"",children:[(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"<"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"Buffer"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" 31 "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"e3"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" 80 81 "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"e9"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" 82 "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"a3"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"e4"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"b8"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" 80 "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"e5"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"b9"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"b4"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"e5"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" 86 "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"b3"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"e8"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"b5"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" 9b "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"ef"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"bc"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" 8c "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"e6"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" 98 "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"af"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" 53 53 47 "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"e5"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"af"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"b9"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"e6"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" 88 98 53 4b 54 "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"ef"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"bc"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" 8c "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"e6"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" 9c 80 "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"e7"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"bb"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" 88 "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"e6"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"af"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" 94 "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"e5"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" ... 635 "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"more"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"bytes"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:">"})]}),"\n"]})})}),"\n",(0,r.jsxs)(e.h3,{id:"\u5E38\u7528-api-\u4ECB\u7ECD",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u5E38\u7528-api-\u4ECB\u7ECD",children:"#"}),"\u5E38\u7528 API \u4ECB\u7ECD"]}),"\n",(0,r.jsxs)(e.h4,{id:"\u8BFB\u53D6\u6587\u4EF6readfile",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u8BFB\u53D6\u6587\u4EF6readfile",children:"#"}),"\u8BFB\u53D6\u6587\u4EF6",(0,r.jsx)(e.code,{children:"readFile"})]}),"\n",(0,r.jsx)(e.p,{children:"\u7B2C\u4E00\u4E2A\u53C2\u6570 \u8BFB\u53D6\u7684\u8DEF\u5F84\uFF0C \u7B2C\u4E8C\u4E2A\u53C2\u6570\u662F\u4E2A\u914D\u7F6E\u9879"}),"\n",(0,r.jsx)(e.p,{children:"\u914D\u7F6E\u9879\u7B2C\u4E00\u4E2A\u662F encoding\uFF0C\u652F\u6301\u5404\u79CD\u7F16\u7801 utf-8 \u4E4B\u7C7B\u7684"}),"\n",(0,r.jsx)(e.p,{children:"\u914D\u7F6E\u9879\u7B2C\u4E8C\u4E2A\u662F flag\uFF0C\u5B83\u7684\u914D\u7F6E\u5C31\u5F88\u591A\u4E86\uFF0C\u5982\u4E0B"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"'a'"}),": \u6253\u5F00\u6587\u4EF6\u8FDB\u884C\u8FFD\u52A0\u3002 \u5982\u679C\u6587\u4EF6\u4E0D\u5B58\u5728\uFF0C\u5219\u521B\u5EFA\u8BE5\u6587\u4EF6\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"'ax'"}),": \u7C7B\u4F3C\u4E8E ",(0,r.jsx)(e.code,{children:"'a'"})," \u4F46\u5982\u679C\u8DEF\u5F84\u5B58\u5728\u5219\u5931\u8D25\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"'a+'"}),": \u6253\u5F00\u6587\u4EF6\u8FDB\u884C\u8BFB\u53D6\u548C\u8FFD\u52A0\u3002 \u5982\u679C\u6587\u4EF6\u4E0D\u5B58\u5728\uFF0C\u5219\u521B\u5EFA\u8BE5\u6587\u4EF6\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"'ax+'"}),": \u7C7B\u4F3C\u4E8E ",(0,r.jsx)(e.code,{children:"'a+'"})," \u4F46\u5982\u679C\u8DEF\u5F84\u5B58\u5728\u5219\u5931\u8D25\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"'as'"}),": \u4EE5\u540C\u6B65\u6A21\u5F0F\u6253\u5F00\u6587\u4EF6\u8FDB\u884C\u8FFD\u52A0\u3002 \u5982\u679C\u6587\u4EF6\u4E0D\u5B58\u5728\uFF0C\u5219\u521B\u5EFA\u8BE5\u6587\u4EF6\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"'as+'"}),": \u4EE5\u540C\u6B65\u6A21\u5F0F\u6253\u5F00\u6587\u4EF6\u8FDB\u884C\u8BFB\u53D6\u548C\u8FFD\u52A0\u3002 \u5982\u679C\u6587\u4EF6\u4E0D\u5B58\u5728\uFF0C\u5219\u521B\u5EFA\u8BE5\u6587\u4EF6\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"'r'"}),": \u6253\u5F00\u6587\u4EF6\u8FDB\u884C\u8BFB\u53D6\u3002 \u5982\u679C\u6587\u4EF6\u4E0D\u5B58\u5728\uFF0C\u5219\u4F1A\u53D1\u751F\u5F02\u5E38\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"'r+'"}),": \u6253\u5F00\u6587\u4EF6\u8FDB\u884C\u8BFB\u5199\u3002 \u5982\u679C\u6587\u4EF6\u4E0D\u5B58\u5728\uFF0C\u5219\u4F1A\u53D1\u751F\u5F02\u5E38\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"'rs+'"}),": \u4EE5\u540C\u6B65\u6A21\u5F0F\u6253\u5F00\u6587\u4EF6\u8FDB\u884C\u8BFB\u5199\u3002 \u6307\u793A\u64CD\u4F5C\u7CFB\u7EDF\u7ED5\u8FC7\u672C\u5730\u6587\u4EF6\u7CFB\u7EDF\u7F13\u5B58\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u8FD9\u4E3B\u8981\u7528\u4E8E\u5728 NFS \u6302\u8F7D\u4E0A\u6253\u5F00\u6587\u4EF6\uFF0C\u56E0\u4E3A\u5B83\u5141\u8BB8\u8DF3\u8FC7\u53EF\u80FD\u8FC7\u65F6\u7684\u672C\u5730\u7F13\u5B58\u3002 \u5B83\u5BF9 I/O \u6027\u80FD\u6709\u975E\u5E38\u5B9E\u9645\u7684\u5F71\u54CD\uFF0C\u56E0\u6B64\u9664\u975E\u9700\u8981\uFF0C\u5426\u5219\u4E0D\u5EFA\u8BAE\u4F7F\u7528\u6B64\u6807\u5FD7\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["\u8FD9\u4E0D\u4F1A\u5C06 ",(0,r.jsx)(e.code,{children:"fs.open()"})," \u6216 ",(0,r.jsx)(e.code,{children:"fsPromises.open()"})," \u53D8\u6210\u540C\u6B65\u963B\u585E\u8C03\u7528\u3002 \u5982\u679C\u9700\u8981\u540C\u6B65\u64CD\u4F5C\uFF0C\u5E94\u8BE5\u4F7F\u7528\u7C7B\u4F3C ",(0,r.jsx)(e.code,{children:"fs.openSync()"})," \u7684\u4E1C\u897F\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"'w'"}),": \u6253\u5F00\u6587\u4EF6\u8FDB\u884C\u5199\u5165\u3002 \u521B\u5EFA\uFF08\u5982\u679C\u5B83\u4E0D\u5B58\u5728\uFF09\u6216\u622A\u65AD\uFF08\u5982\u679C\u5B83\u5B58\u5728\uFF09\u8BE5\u6587\u4EF6\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"'wx'"}),": \u7C7B\u4F3C\u4E8E ",(0,r.jsx)(e.code,{children:"'w'"})," \u4F46\u5982\u679C\u8DEF\u5F84\u5B58\u5728\u5219\u5931\u8D25\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"'w+'"}),": \u6253\u5F00\u6587\u4EF6\u8FDB\u884C\u8BFB\u5199\u3002 \u521B\u5EFA\uFF08\u5982\u679C\u5B83\u4E0D\u5B58\u5728\uFF09\u6216\u622A\u65AD\uFF08\u5982\u679C\u5B83\u5B58\u5728\uFF09\u8BE5\u6587\u4EF6\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"'wx+'"}),": \u7C7B\u4F3C\u4E8E ",(0,r.jsx)(e.code,{children:"'w+'"})," \u4F46\u5982\u679C\u8DEF\u5F84\u5B58\u5728\u5219\u5931\u8D25\u3002"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"\u793A\u4F8B\u4EE3\u7801\uFF1A"}),"\n",(0,r.jsx)(e.pre,{className:"code",children:(0,r.jsx)(e.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(e.code,{className:"language-js",meta:"",children:[(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" fs2 "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'node:fs/promises'"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(e.span,{className:"line line-number"}),"\n",(0,r.jsx)(e.span,{className:"line line-number",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"fs2"})}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".readFile"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./index.txt'"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    encoding"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'utf8'"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    flag"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"''"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(e.span,{className:"line line-number",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  })"})}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".then"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"((result) "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"console"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".log"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"result"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".toString"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"());"})]}),"\n",(0,r.jsx)(e.span,{className:"line line-number",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  });"})}),"\n"]})})}),"\n",(0,r.jsxs)(e.h4,{id:"\u4F7F\u7528\u53EF\u8BFB\u6D41\u8BFB\u53D6",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u4F7F\u7528\u53EF\u8BFB\u6D41\u8BFB\u53D6",children:"#"}),"\u4F7F\u7528\u53EF\u8BFB\u6D41\u8BFB\u53D6"]}),"\n",(0,r.jsxs)(e.p,{children:["\u4F7F\u7528\u573A\u666F:\u9002\u5408\u8BFB\u53D6",(0,r.jsx)(e.code,{children:"\u5927\u6587\u4EF6"})]}),"\n",(0,r.jsx)(e.pre,{className:"code",children:(0,r.jsx)(e.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(e.code,{className:"language-js",meta:"",children:[(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"readStream"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"fs"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".createReadStream"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./index.txt'"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  encoding"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'utf8'"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(e.span,{className:"line line-number",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"});"})}),"\n",(0,r.jsx)(e.span,{className:"line line-number"}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"readStream"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".on"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'data'"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" (chunk) "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"console"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".log"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"(chunk);"})]}),"\n",(0,r.jsx)(e.span,{className:"line line-number",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"});"})}),"\n",(0,r.jsx)(e.span,{className:"line line-number"}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"readStream"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".on"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'end'"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" () "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"console"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".log"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'close'"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:");"})]}),"\n",(0,r.jsx)(e.span,{className:"line line-number",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"});"})}),"\n"]})})}),"\n",(0,r.jsxs)(e.h4,{id:"\u521B\u5EFA\u6587\u4EF6\u5939",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u521B\u5EFA\u6587\u4EF6\u5939",children:"#"}),"\u521B\u5EFA\u6587\u4EF6\u5939"]}),"\n",(0,r.jsx)(e.p,{children:"\u5982\u679C\u5F00\u542F recursive \u53EF\u4EE5\u9012\u5F52\u521B\u5EFA\u591A\u4E2A\u6587\u4EF6\u5939"}),"\n",(0,r.jsx)(e.pre,{className:"code",children:(0,r.jsx)(e.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(e.code,{className:"language-js",meta:"",children:[(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"fs"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".mkdir"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'path/test/ccc'"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" { recursive"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"true"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" }"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" (err) "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" {});"})]}),"\n"]})})}),"\n",(0,r.jsxs)(e.h4,{id:"\u5220\u9664\u6587\u4EF6\u5939",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u5220\u9664\u6587\u4EF6\u5939",children:"#"}),"\u5220\u9664\u6587\u4EF6\u5939"]}),"\n",(0,r.jsx)(e.p,{children:"\u5982\u679C\u5F00\u542F recursive \u9012\u5F52\u5220\u9664\u5168\u90E8\u6587\u4EF6\u5939"}),"\n",(0,r.jsx)(e.pre,{className:"code",children:(0,r.jsx)(e.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(e.code,{className:"language-js",meta:"",children:[(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"fs"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".rm"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'path'"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" { recursive"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"true"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" }"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" (err) "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" {});"})]}),"\n"]})})}),"\n",(0,r.jsxs)(e.h4,{id:"\u91CD\u547D\u540D\u6587\u4EF6",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u91CD\u547D\u540D\u6587\u4EF6",children:"#"}),"\u91CD\u547D\u540D\u6587\u4EF6"]}),"\n",(0,r.jsx)(e.p,{children:"\u7B2C\u4E00\u4E2A\u53C2\u6570\u539F\u59CB\u540D\u79F0 \u7B2C\u4E8C\u4E2A\u53C2\u6570\u65B0\u7684\u540D\u79F0"}),"\n",(0,r.jsx)(e.pre,{className:"code",children:(0,r.jsx)(e.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(e.code,{className:"language-js",meta:"",children:[(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"fs"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".renameSync"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./test.txt'"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./test2.txt'"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:");"})]}),"\n"]})})}),"\n",(0,r.jsxs)(e.h4,{id:"\u76D1\u542C\u6587\u4EF6\u7684\u53D8\u5316",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u76D1\u542C\u6587\u4EF6\u7684\u53D8\u5316",children:"#"}),"\u76D1\u542C\u6587\u4EF6\u7684\u53D8\u5316"]}),"\n",(0,r.jsxs)(e.p,{children:["\u8FD4\u56DE\u76D1\u542C\u7684\u4E8B\u4EF6\u5982",(0,r.jsx)(e.code,{children:"change"}),",\u548C\u76D1\u542C\u7684\u5185\u5BB9",(0,r.jsx)(e.code,{children:"filename"})]}),"\n",(0,r.jsx)(e.pre,{className:"code",children:(0,r.jsx)(e.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(e.code,{className:"language-js",meta:"",children:[(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"fs"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".watch"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./test2.txt'"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" (event"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" filename) "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"console"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".log"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"(event"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" filename);"})]}),"\n",(0,r.jsx)(e.span,{className:"line line-number",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"});"})}),"\n"]})})}),"\n",(0,r.jsxs)(e.h3,{id:"\u6E90\u7801\u89E3\u6790",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u6E90\u7801\u89E3\u6790",children:"#"}),"\u6E90\u7801\u89E3\u6790"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:"https://github.com/libuv/libuv",target:"_blank",rel:"noopener noreferrer",children:"github \u6E90\u7801\u5730\u5740"})}),"\n",(0,r.jsx)(e.p,{children:"\u76EE\u5F55\uFF1Asrc/unix/fs.c"}),"\n",(0,r.jsxs)(e.p,{children:["fs \u7684\u6E90\u7801\u662F\u901A\u8FC7 ",(0,r.jsx)(e.code,{children:"C++"})," \u5C42\u7684 ",(0,r.jsx)(e.code,{children:"FSReqCallback"})," \u8FD9\u4E2A\u7C7B \u5BF9",(0,r.jsx)(e.code,{children:"libuv"})," \u7684",(0,r.jsx)(e.code,{children:"uv_fs_t"})," \u7684\u4E00\u4E2A\u5C01\u88C5\uFF0C\u5176\u5B9E\u4E5F\u5C31\u662F\u5C06\u6211\u4EEC fs \u7684\u53C2\u6570\u900F\u4F20\u7ED9 ",(0,r.jsx)(e.code,{children:"libuv"})," \u5C42"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:"https://chen-1320883525.cos.ap-chengdu.myqcloud.com/img/image-20231128162647804.png",alt:""})}),"\n",(0,r.jsx)(e.p,{children:"mkdir \u4E3E\u4F8B"}),"\n",(0,r.jsx)(e.pre,{className:"code",children:(0,r.jsx)(e.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(e.code,{className:"language-c",meta:"",children:[(0,r.jsx)(e.span,{className:"line line-number",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"// \u521B\u5EFA\u76EE\u5F55\u7684\u5F02\u6B65\u64CD\u4F5C\u51FD\u6570\uFF0C\u901A\u8FC7uv_fs_mkdir\u51FD\u6570\u8C03\u7528"})}),"\n",(0,r.jsx)(e.span,{className:"line line-number",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"// \u53C2\u6570\uFF1A"})}),"\n",(0,r.jsx)(e.span,{className:"line line-number",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"// - loop: \u4E8B\u4EF6\u5FAA\u73AF\u5BF9\u8C61\uFF0C\u7528\u4E8E\u5904\u7406\u5F02\u6B65\u64CD\u4F5C"})}),"\n",(0,r.jsx)(e.span,{className:"line line-number",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"// - req: \u6587\u4EF6\u7CFB\u7EDF\u8BF7\u6C42\u5BF9\u8C61\uFF0C\u7528\u4E8E\u4FDD\u5B58\u64CD\u4F5C\u7684\u72B6\u6001\u548C\u7ED3\u679C"})}),"\n",(0,r.jsx)(e.span,{className:"line line-number",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"// - path: \u8981\u521B\u5EFA\u7684\u76EE\u5F55\u7684\u8DEF\u5F84"})}),"\n",(0,r.jsx)(e.span,{className:"line line-number",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"// - mode: \u76EE\u5F55\u7684\u6743\u9650\u6A21\u5F0F 777 421"})}),"\n",(0,r.jsx)(e.span,{className:"line line-number",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"// - cb: \u64CD\u4F5C\u5B8C\u6210\u540E\u7684\u56DE\u8C03\u51FD\u6570"})}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"int"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"uv_fs_mkdir"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"uv_loop_t"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" loop"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"                "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"uv_fs_t"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" req"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"                "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"char*"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" path"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"                "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"int"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" mode"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(e.span,{className:"line line-number",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"                uv_fs_cb cb) {"})}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"INIT(MKDIR)"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(e.span,{className:"line line-number",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  PATH;"})}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"req"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:"->"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"mode "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" mode;"})]}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" (cb "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"!="}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"NULL"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" ("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"uv__iou_fs_mkdir(loop"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" req)"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(e.span,{className:"line line-number",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  POST;"})}),"\n",(0,r.jsx)(e.span,{className:"line line-number",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n"]})})}),"\n",(0,r.jsxs)(e.h3,{id:"\u6CE8\u610F\u4E8B\u9879",children:[(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u6CE8\u610F\u4E8B\u9879",children:"#"}),"\u6CE8\u610F\u4E8B\u9879"]}),"\n",(0,r.jsx)(e.pre,{className:"code",children:(0,r.jsx)(e.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(e.code,{className:"language-js",meta:"",children:[(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"fs"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"require"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'node:fs'"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:");"})]}),"\n",(0,r.jsx)(e.span,{className:"line line-number"}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"fs"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".readFile"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("})]}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./index.txt'"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(e.span,{className:"line line-number",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  {"})}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    encoding"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'utf-8'"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    flag"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'r'"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  }"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  (err"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" dataStr) "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" (err) "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"throw"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" err;"})]}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"console"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".log"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'fs'"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:");"})]}),"\n",(0,r.jsx)(e.span,{className:"line line-number",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,r.jsx)(e.span,{className:"line line-number",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:");"})}),"\n",(0,r.jsx)(e.span,{className:"line line-number"}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"setImmediate"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"(() "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(e.span,{className:"line line-number",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"console"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".log"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'setImmediate'"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:");"})]}),"\n",(0,r.jsx)(e.span,{className:"line line-number",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"});"})}),"\n"]})})}),"\n",(0,r.jsx)(e.p,{children:"\u4E3A\u4EC0\u4E48\u5148\u8D70 setImmediate \u5462\uFF0C\u800C\u4E0D\u662F fs \u5462?"}),"\n",(0,r.jsx)(e.p,{children:"Node.js \u8BFB\u53D6\u6587\u4EF6\u7684\u65F6\u5019\u662F\u4F7F\u7528 libuv \u8FDB\u884C\u8C03\u5EA6\u7684\uFF0C\u800C setImmediate \u662F\u7531 V8 \u8FDB\u884C\u8C03\u5EA6\u7684"}),"\n",(0,r.jsx)(e.p,{children:"\u6587\u4EF6\u8BFB\u53D6\u5B8C\u6210\u540E libuv \u624D\u4F1A\u5C06 fs \u7684\u7ED3\u679C \u63A8\u5165 V8 \u7684\u961F\u5217"})]})}function o(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,l.ah)(),s.components);return e?(0,r.jsx)(e,Object.assign({},s,{children:(0,r.jsx)(i,s)})):i(s)}e.default=o,o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["guide%2Fnode%2F19-fs(%E4%B8%8A).md"]={toc:[{id:"19-fs-\u4E0A",text:"19-fs \u4E0A",depth:2},{id:"\u6982\u8FF0",text:"\u6982\u8FF0",depth:3},{id:"fs-\u591A\u79CD\u7B56\u7565",text:"fs \u591A\u79CD\u7B56\u7565",depth:3},{id:"\u5E38\u7528-api-\u4ECB\u7ECD",text:"\u5E38\u7528 API \u4ECB\u7ECD",depth:3},{id:"\u8BFB\u53D6\u6587\u4EF6readfile",text:"\u8BFB\u53D6\u6587\u4EF6`readFile`",depth:4},{id:"\u4F7F\u7528\u53EF\u8BFB\u6D41\u8BFB\u53D6",text:"\u4F7F\u7528\u53EF\u8BFB\u6D41\u8BFB\u53D6",depth:4},{id:"\u521B\u5EFA\u6587\u4EF6\u5939",text:"\u521B\u5EFA\u6587\u4EF6\u5939",depth:4},{id:"\u5220\u9664\u6587\u4EF6\u5939",text:"\u5220\u9664\u6587\u4EF6\u5939",depth:4},{id:"\u91CD\u547D\u540D\u6587\u4EF6",text:"\u91CD\u547D\u540D\u6587\u4EF6",depth:4},{id:"\u76D1\u542C\u6587\u4EF6\u7684\u53D8\u5316",text:"\u76D1\u542C\u6587\u4EF6\u7684\u53D8\u5316",depth:4},{id:"\u6E90\u7801\u89E3\u6790",text:"\u6E90\u7801\u89E3\u6790",depth:3},{id:"\u6CE8\u610F\u4E8B\u9879",text:"\u6CE8\u610F\u4E8B\u9879",depth:3}],title:"",frontmatter:{}}}}]);