# 交换变量的值

在 JS 中，交换 x 和 y 的值，有哪些方法呢？我们最常用的就是通过临时变量来存储一个值然后交换：

```js
let x = 1
let y = 2

let temp = x
x = y
y = temp
console.log(x, y) // 2 1
```

## 解构交换

但如果不通过临时变量还有哪些方法呢？实际场景中我们还可以使用 ES6 的解构

```js
let x = 1
let y = 2
;[y, x] = [x, y]
console.log(x, y) // 2 1
```

为什么它可以实现交换变量的值呢？我们分析一下：

- 首先右侧的表达式相当于创建了一个临时的数组，这个临时的数组就包含了 x 和 y 的值即`[1, 2]`
- 然后左侧的表达式就是一个解构赋值的模式，它告诉 JS 我们要将数组中的值分别提取赋值给`y`和`x`，即将右侧的第一个元素`1`赋值给左侧的第一个元素`y`，然后将右侧的`2`赋值给左侧的`x`。

这样 x 和 y 的值就成功交换了

## 异或操作

除了解构之外，我们还可以通过异或操作来实现交换：

```js
let x = 1
let y = 2
x = x ^ y
y = x ^ y
x = x ^ y
console.log(x, y) // 2 1
```

如果不清楚 异或操作的规则，可以看如下的规则，简单点就是相同为 0 不同 为 1。

- 0 异或 0 等于 0 即 0 ^ 0 = 0
- 0 异或 1 等于 1 即 0 ^ 1 = 1
- 1 异或 0 等于 1 即 1 ^ 0 = 1
- 1 异或 1 等于 0 即 1 ^ 1 = 0

根据这个规则上面的三次异或结果就是如下，后面是转为二进制的：

- x = x ^ y = 1 ^ 2 = 01 ^ 10 = 11
- y = x ^ y = 11 ^ 10 = 01 （注意此时 x 的值被上一次赋值变为了 11）
- x = x ^ y = 11 ^ 01 = 10 （此时 x 为 11 ，y 被上一次赋值变为了 01）

因此最开始的`x`为 1 转为 二进制`01`，最开始`y`为 2 转为二进制`10`，通过异或操作就交换了值。

## 加减运算

除了上面的两个，我们还可以通过加减运算来交换，没想到吧？加减运算也可以：

```js
let x = 1
let y = 2
x = x + y
y = x - y
x = x - y
console.log(x, y) // 2 1
```

其实这个就是简单的数学思维：

- x = x + y = 1 + 2 = 3
- y = x - y = 3 - 2 = 1
- x = x - y = 3 - 1 = 2

思路就是保存两数之和，然后`y`值就是两数之和 - y 即 x 的原来值，`x`值即两数之和 - x 即 y 的原来值。
