# parseInt 与 Math.floor 的区别

本小节我们来讲`parseInt`与`Math.floor` 使用场景的区别：

## 相同点

首先我们来看相同点，都能获取小数的整数部分：

```js
console.log(parseInt(4.95)) // 4
console.log(Math.floor(4.95)) // 4
```

看起来好像没问题，但在部分场景下有些细微的差别

## 不同点

比如获取 min 到 max 之间的随机数，只能用`Math.floor`

```js
function randomRange(min, max) {
	return Math.floor(Math.random() * (max - min + 1) + min)
}
```

为什么不能使用`parseInt`呢？我们来看它们的特点：

- **无论正负**，`Math.floor`都只是简单地将一个数**向下取整**到最接近的整数，它只接受**一个参数**，这个参数就是你想要向下取整的数。

- 而`parseInt`则需要区分，对于负数，会**向上取整**到最接近的整数，对于正数，会**向下取整**到最接近的整数

这里的重点就是**无论正负**，比如`-4.05`，`Math.floor`向下取整后会变为`-5`，而`parseInt`会取到`-4`，因此在获取`min`到`max`之间的随机数时，`parseInt`在获取`-5`的时候，只有一种可能，那就是传入的值正好为`-5`，这样会导致获取概率降低了。

`parseInt`还有其他特点，这里了解即可：

- `parseInt`会忽略任何数字后面的非数字字符
- `parseInt`可以传第二个参数，表示进制，处理不同的进制数据

如果还是不怎么理解，我们举个例子，获取`-2`到`-1`之间的随机数：

```js
console.log(randomRange(-2, -1))
```

这里的`(max - min + 1)`的值就是 2，然后`Math.random()`就是随机值生成函数，取值范围`[0, 1)`，从 0 (包括 0) 往上，但不包括 1。

所以这的`Math.random()*(max - min + 1)`的值范围就是`[0, 2)`，注意还是包括 0 但不包括 2

然后在这里基础上再加上`min`，最后`Math.random()*(max - min + 1) + min`值为`[-2, 0)`。

然后通过`Math.floor`来向下取值，比如`-2`、`-1.5`一直到`-1`，都会取值`-2`，然后`-1`、`-0.5`一直到`0`，都会取值`-1`，这样我们就有 50%的概率获取到`-2`，也有 50% 获取到 `-1`。

但如果我们换成`parseInt`会发生什么？`parseInt`对于负数会向上取整，因此`(-2, -1]`之间都会取值`-1`，而`(-1, 0)`之间都会取`0`，只有极低的概率，即`Math.random()`正好为 0 的时候，传入`parseInt`的值为`-2`，才会取值`-2`，这样我们就发现概率完全不等，而且取的范围也不一样。

所以这种场景下需要使用`Math.floor`而不是`parseInt`。
