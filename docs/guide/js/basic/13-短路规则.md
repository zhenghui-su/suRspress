# 短路规则

我们可能会遇到部分代码难以理解，比如下面的：

```js
'hello' && 5
0 && 'world'
'hello' || 5
0 || 'world'
```

想要知道它们，就得先知道一些逻辑运算符 与、或 的值

## 与、或运算符

与运算符`&&`规则如下，一句话就是同真为真，其余为假。

- `true && true` 返回 `true`
- `true && false`返回 `false`
- `false && true`返回 `false`
- `false && false` 返回 `false`

或运算符`||`规则如下，一句话就是同假为假，其余为真

- `true || true` 返回 `true`
- `true || false`返回 `true`
- `false || true`返回 `true`
- `false || false` 返回 `false`

## 短路规则

上面的比较简单，主要就是当我们两边不传布尔值的时候，需要以**短路规则**来判断返回结果

- `&&`短路规则：**第一个操作数为假**返回第一个操作数的值，为真返回第二个操作数的值

- `||`短路规则：和上面相反，**第一个是真返回第一个**，为假返回第二个

因此根据这个规则，我们再来看刚刚的代码：

```js
'hello' && 5
0 && 'world'
'hello' || 5
0 || 'world'
```

我们一一解释：

- 第一个操作数是真值，然后是`&&`，返回第二个操作数的值，因此为 5
- 第一个操作数是假值，然后是`&&`，返回第一个操作数的值，因此为 0
- 第一个操作数是真值，然后是`||`，返回第一个操作数的值，因此为 hello
- 第一个操作数是假值，然后是`||`，返回第二个操作数的值，因此为 world

在控制台尝试，结果一样：

![image-20240828212201652](https://chen-1320883525.cos.ap-chengdu.myqcloud.com/img/image-20240828212201652.png)

如果是真假值判断不清楚，参考 MDN 文档：[假值](https://developer.mozilla.org/zh-CN/docs/Glossary/Falsy)、[真值](https://developer.mozilla.org/zh-CN/docs/Glossary/Truthy)。

上面的情况是比较简单的两个操作数比较，但如果遇到 n 个操作数，它们的短路规则是什么呢？

- 逻辑与：从左往右**返回第一个遇到的假值**，如果全为真则返回最后一个操作数的值
- 逻辑或：从左往右**返回第一个遇到的真值**，如果全为假则返回最后一个操作数的值

我们可以看看下面的代码，先都是逻辑与的：

```js
1 && 2 && 3
0 && 'Hello' && ['array']
'a' && '' && 'c'
true && 4 && 'Su' && null && 'Chen'
```

一一解释：

- 没有假值，返回最后一个即 3
- 第一个`0`为假，返回 0
- 第二个`""`为假，返回 ""
- 第四个`null`为假，返回 null

我们查看控制台，一样的输出：

![image-20240828212848975](https://chen-1320883525.cos.ap-chengdu.myqcloud.com/img/image-20240828212848975.png)

我们再来看下面逻辑或的代码：

```js
0 || false || null
'a' || 'b' || 'c'
undefined || '' || 0 || 'Hello'
null || 0 || false || 'World'
```

一一解释：

- 全为假值，返回最后一个 null
- 第一个`"a"`为真值，返回 "a"
- 最后一个`"Hello"`为真值，返回 "Hello"
- 最后一个`"World"`为真值，返回 "World"

控制台输入查看结果，没问题：

![image-20240828213237772](https://chen-1320883525.cos.ap-chengdu.myqcloud.com/img/image-20240828213237772.png)

通过这些我们就掌握了短路规则相关知识
